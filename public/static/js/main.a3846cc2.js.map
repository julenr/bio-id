{"version":3,"sources":["../webpack/bootstrap","styles/helpers.js","util/api-interface.js","web-api/index.js","util/history.js","app/BiometricID/Steps/styled.js","components/Icons/index.jsx","components/Buttons/index.jsx","app/BiometricID/actions.js","app/Settings/styled.js","components/ProgressBar/index.jsx","app/redux/actions/app.js","app/SessionsReview/constants.js","app/BiometricID/constants.js","app/redux/actions/action-types.js","util/helpers.js","app/registerServiceWorker.js","app/App/styled.js","components/SidePanel/styled.js","components/SidePanel/index.jsx","app/App/layout/MobilePanel/styled.js","app/App/layout/MobilePanel/index.jsx","app/App/layout/Header/MobileBar/styled.js","app/App/layout/Header/MobileBar/index.jsx","app/App/layout/Header/index.jsx","app/App/layout/Footer/CopyrightBar/styled.js","app/App/layout/Footer/CopyrightBar/index.jsx","styles/colors.js","styles/variables.js","app/App/layout/Footer/styled.js","app/App/layout/Footer/index.jsx","app/App/ScrollToTop.jsx","components/Toogle/styled.js","components/Toogle/index.jsx","app/Settings/options.js","app/Settings/index.jsx","app/SessionsReview/actions.js","app/SessionsReview/styled.js","app/SessionsReview/index.jsx","app/BiometricID/styled.js","app/BiometricID/End/styled.js","app/BiometricID/End/index.jsx","assets/images/start.png","app/BiometricID/Start/styled.js","app/BiometricID/Start/index.jsx","app/BiometricID/MediaCapture/styled.js","components/IdOverlay/styled.js","components/IdOverlay/index.jsx","app/BiometricID/MediaCapture/recorder.js","util/headtracker.js","app/BiometricID/MediaCapture/index.js","assets/images/step3.gif","assets/images/step2.gif","assets/images/step1.gif","components/ProgressBar/styled.js","components/Buttons/styled.js","app/BiometricID/Steps/Step.jsx","app/BiometricID/Steps/index.jsx","app/BiometricID/routes.js","app/BiometricID/index.jsx","app/Main/styled.js","app/Main/index.jsx","util/AsyncComponent.js","app/App/routes.js","app/App/index.js","app/SessionsReview/reducers.js","app/BiometricID/reducers.js","app/redux/reducers/app.js","app/redux/reducers/index.js","app/redux/create-store.js","app/index.js","../config/polyfills.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","p","jsonpArray","window","oldJsonpFunction","bind","slice","_variables","keys","forEach","key","_colors","cbk","errorHandlerCbk","_webApi","msg","endPoint","URLParams","arguments","undefined","queryParams","default","then","res","ok","json","status","Promise","reject","errorHandler","root","DUMMY","url","mth","BIO_ID_FACE_DETECTION","BIO_ID_SAVE_VIDEO","SAVE_VIDEO_IMAGES","GET_SESSIONS","composeEndPoint","concat","replace","setURLParams","obj","reduce","acc","idx","encodeURIComponent","fetch","_ref","auth","JWT","localStorage","getItem","assign","method","headers","Accept","Content-Type","mode","body","JSON","stringify","authorization","init","history","_styledComponents","_interopRequireDefault","_step","_step2","_step3","StepContainer","styled","div","withConfig","displayName","CallToAction","CallToAction1","extend","_templateObject","img1","CallToAction2","_templateObject2","_ref2","img2","CallToAction3","_templateObject3","_ref3","img3","GreenCircle","StepCounter","StepTitle","h3","StepBodyText","RedoLink","React","_interopRequireWildcard","Icon","icon","size","color","props","_objectWithoutProperties","style","fill","createElement","_extends","height","width","role","aria-label","xlinkHref","defaultProps","sizes","full","w","h","Logo","logo","logSize","svgHeight","Math","round","calcWitdh","className","class","_styled","children","StyledButton","_helpers","_constants","_apiInterface","dispatch","type","FACE_DETECTION","err","Error","sessionId","stepNumber","videoData","videoOptions","SAVE_VIDEO","INIT_BIOMETRIC_ID_SESSION","id","uuidV1","setting","SWITCH_SETTING","SET_SETTING","Container","section","Content","Option","Title","h1","OptionWrapper","ProgressBar","_this","_classCallCheck","this","_getPrototypeOf","_defineProperty","_assertThisInitialized","viewBox","viewBoxSize","strokeDasharray","percent","speedTransform","_this$props","border","offset","parseInt","setState","meter","speed","getTotalLength","newPercent","timeTransform","state","setBorder","updateMeter","prevProps","_this2","_this$props2","background","bgOpacity","_this$state","ProgressBarStyled","stroke","strokeOpacity","ref","Component","types","MOBILE_PANEL_SWITCH","payload","STORE_ACTIVE_ROUTE","LOAD_DUMMY","promise","delayInMS","resolve","setTimeout","log","console","Array","b","a","random","toString","decimals","toLocaleString","minimumFractionDigits","maximumFractionDigits","f","t","R","G","B","navigator","publicUrl","URL","location","origin","addEventListener","swUrl","isLocalhost","response","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","checkValidServiceWorker","Boolean","hostname","match","register","onupdatefound","installingWorker","installing","onstatechange","controller","error","injectGlobal","backgroundColor","grtMediumViewport","mainFontFamily","textBaseColor","Wrapper","PanelMask","active","Panel","nav","_reactRouterDom","MobileMenu","white","Header","glacier10","CloseButton","Options","Link","tipTop500","_Icons","_SidePanel","options","label","MobilePanel","next","mobilePanel","e","mobBar","document","querySelector","contains","target","mobilePanelSwitch","clickHandler","removeEventListener","onClick","renderOptions","map","to","MobileBar","maxContentWidth","LinkButton","$silverFern500","stopPropagation","openMobilePanel","_react","_MobileBar","Copyright","generalMargin","success","info","warning","danger","Footer","footer","minContentWidth","_CopyrightBar","Toogle","enabled","on","Switch","ToogleComponent","_possibleConstructorReturn","_onClick","_Toogle","selected","onChange","Fragment","checked","htmlFor","min","max","_reactRedux","_actions","_options","Settings","cameraResolutions","cstList","mediaDevices","getUserMedia","video","exact","stream","getTracks","track","stop","detectVideoSizes","autoStartOnDetection","switchSetting","setSetting","captureVideo","recordingTime","speechRecognition","useMediaRecorderApi","faceAngleDetection","faceDetection","overlayAutoRotation","framesPerSecond","imageType","idType","resolution","videoQuality","videoCodec","marginBottom","ToogleOption","OptionsGroupOption","RangeOption","connect","_ref$biometricId$sett","biometricId","settings","REQUEST_SESSIONS","appActions","SessionsReview","event","requestSessions","sessions","list","session","step1","step2","step3","socket","WebSocket","send","onmessage","socketMsg","close","_objectSpread","JoinStepTitle","h2","_history","_Buttons","_styled2","pathname","Intro","Image","img","List","ol","_start","src","imagen","mediaActivated","VideoContainer","OverlayContainer","OverlayContent","_ref2$overlaysize","overlaysize","rotate","_ref3$overlaysize","_ref4","_ref4$overlaysize","progress","pulse","keyframes","RecButton","_ref5","recording","dash","Overlay","svg","OverlayComponent","strokeDashoffset","strokeWidth","x","y","rx","ry","svgoverlay","FfmpegRecorder","canvas","captureFrames","clearInterval","interval","ondataavailable","frames","onstop","setInterval","recordEnabled","canvasCtx","drawImage","toDataURL","quality","fps","getContext","MediaRecorder","srcObject","headtrackr","rev","Tracker","params","smoothing","retryDetection","ui","debug","tagName","debugContext","smoother","facetracker","headposition","canvasElement","canvasContext","videoElement","detector","detectionTimer","detectionInterval","fadeVideo","cameraOffset","calcAngles","headPosition","fov","run","faceFound","firstRun","videoFaded","headDiagonal","statusEvent","createEvent","initEvent","headtrackerStatus","message","dispatchEvent","Ui","Smoother","initialized","facetrackr","faceObj","getTrackingObject","detection","confidence","Date","getTime","strokeStyle","strokeRect","translate","angle","PI","whitebalancing","opacity","smooth","stable","headdiag","sqrt","distance_from_camera_to_screen","getFOV","starter","getWhitebalance","start","currentTime","paused","ended","clearTimeout","stopStream","getVideoTracks","Function","oThis","TypeError","aArgs","fToBind","fNOP","fBound","ccv","grayscale","pix1","pix2","ctx","imageData","getImageData","pix","putImageData","array_group","seq","gfunc","node","parent","element","rank","root2","temp","node2","class_idx","node1","index","cat","detect_objects","cascade","min_neighbors","k","q","scale","pow","scale_upto","floor","pyr","stage_classifier","orig_feature","feature","scale_x","scale_y","dx","dy","qw","qh","step","paddings","count","px","pz","nx","nz","py","ny","u8","u8o","sum","flag","alpha","feature_k","pmin","nmax","shortcut","threshold","neighbor","r1","r2","distance","ncomp","idx_seq","comps","neighbors","seq2","result_seq","image","imagesize","g","sp","sp2","sl","positions","initPos","z","pos","camshift","Histogram","imgdata","il","bins","getBin","Moments","second","val","vx","vy","m00","m01","m10","m11","m02","m20","invM00","xc","yc","mu00","mu01","mu10","mu20","mu02","mu11","Rectangle","clone","_modelHist","_pdf","_searchWindow","_trackObj","_canvasCtx","_canvasw","_canvash","getSearchWindow","getTrackObj","getPdf","getBackProjectionImg","weights","createImageData","imgData","initTracker","trackedArea","taw","tah","tax","tay","trackedImg","TrackObj","frame","wadx","wady","wadw","wadh","curHist","mh","ch","getWeights","idw","idh","hsMap","getBackProjectionData","prevx","prevy","meanShiftIterations","meanShift","atan2","camShift","sendEvents","_currentDetection","_inputcanvas","_curtracked","_cstracker","previousWhitebalances","inputcanvas","wb","checkWhitebalance","ccvCanvas","candidate","comp","diff","time","doVJDetection","csresult","doCSDetection","pop","unshift","cRectangle","evt","timeout","d2","setAttribute","left","right","top","fontSize","position","fontFamily","zIndex","marginLeft","marginRight","textAlign","appendChild","supportMessages","no getUserMedia","no camera","statusMessages","whitebalance","detecting","hints","redetecting","lost","found","override","messagep","getElementById","innerHTML","facetrackrObj","camwidth","camheight","edgecorrection","camheight_cam","camwidth_cam","head_small_angle","atan","head_diag_cm","head_width_cm","sin_hsa","sin","cos_hsa","cos","tan_hsa","tan","init_width_cam","init_height_cam","head_diag_cam","head_width_cam","camwidth_at_default_face_cm","distance_to_screen","fov_width","tan_fov_width","fx","fy","leftDistance","rightDistance","topDistance","bottomDistance","onVerticalEdge","originalWeight","estimateWeight","getTrackerObj","controllers","_debounce","_headtracker","_recorder","_ProgressBar","_IdOverlay","DEFAULT_RECORD_TIME","MediaCapture","prgsBarValue","overlaySize","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","cancelFullScreen","mozCancelFullScreen","webkitCancelFullScreen","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","htracker","canvasCapture","faceTrackPaint","canvasDraw","display","videoWidth","videoHeight","overlayContext","clearRect","onloadedmetadata","_video$videoHeight","_video$videoWidth","calcOverlaySize","onresize","clientWidth","clientHeight","stopFaceDetection","recorder","endCbk","onerror","triggerProgressBar","cb","recTime","pgsBarInterval","title","autoPlay","maxHeight","recordMedia","visibility","HT","toggleFullScreen","constrains","setCanvasSizes","activatedCbk","startFaceDetection","mediaRecorder","audio","button","_MediaCapture","START","ACTIVATING","ACTIVE","CAPTURING","COMPLETED","StatusTxt","_StatusTxt","Step","progressBarValue","progressBarInitialValue","setStatus","recordedData","progressBarStepValue","Blob","reader","FileReader","sendVideoData","dnlButton","href","download","readAsDataURL","saveVideo","setStatusActivatingMedia","nextRoute","mediaCaptureTxt","stepTitleTxt","stepBodyTxt","completedTxt","redoTxt","svgOverlay","Body","handleClick","includes","setStatusActivatedMedia","setStatusComplete","_Step","mapStateToProps","_ref$biometricId","split","Step1","facingMode","Step2","Step3","_Steps","_Start","_End","path","component","Start","End","_routes","BiometricId","nextStep","routes","route","Route","bioAuto","initBiometricIdSession","Layout","Route1","loadDummy","getComponent","_class","_temp2","_React$Component","AsyncComponent","_getPrototypeOf2","_temp","_len","args","_key","_createClass","_inherits","_AsyncComponent","mdl","_ScrollToTop","_Footer","_Header","_MobilePanel","setApiErrorHandlerCbk","App","Router","_ref$app$ui","app","activeURL","newState","coordinates","_redux","_app","_reducers","_reducers2","combineReducers","_reduxThunk","store","initialState","Store","configureStore","middleware","applyMiddleware","thunk","createStore","reducer","getState","getInitialState","action","_reactDom","_createStore","_App","_registerServiceWorker","setLog","ReactDOM","render","Provider","enable"],"mappings":"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","file":"static/js/main.a3846cc2.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"static/js/\" + ({}[chunkId]||chunkId) + \".\" + {}[chunkId] + \".chunk.js\"\n \t}\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([127,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from './variables.js';\nexport * from './colors.js';\n","// @flow\n\nimport API from 'web-api';\n\ntype ErrorHandlerCbk = string => string | void;\n\nlet errorHandlerCbk: ErrorHandlerCbk = msg => msg;\n\nfunction APIInterface(\n  endPoint: string,\n  URLParams: string = '',\n  queryParams: Object = {},\n  data: Object\n) {\n  return API(endPoint, URLParams, queryParams, data).then(\n    res => (res.ok ? res.json().then(json => json) : errorHandler(res))\n  );\n}\n\nfunction errorHandler(res) {\n  switch (res.status) {\n    case 500:\n      errorHandlerCbk('500 error');\n      break;\n    default:\n      return res.json().then(json => Promise.reject(json));\n  }\n}\n\nexport function setApiErrorHandlerCbk(cbk: ErrorHandlerCbk) {\n  errorHandlerCbk = cbk;\n}\n\nexport default APIInterface;\n","const baseUrl = '/api/';\n\n// DUMMY\nlet root = `${baseUrl}v1/dummy/`;\nexport const DUMMY = { url: `${root}##.json?`, mth: 'GET' };\n\n// BIOMETRIC ID\nroot = `${baseUrl}v1/biometric-id/`;\nexport const BIO_ID_FACE_DETECTION = {\n  url: `${root}face-detection/##.json?`,\n  mth: 'POST',\n};\nexport const BIO_ID_SAVE_VIDEO = {\n  url: `${root}save-video`,\n  mth: 'POST',\n};\nexport const SAVE_VIDEO_IMAGES = {\n  url: `${root}save-video-images`,\n  mth: 'POST',\n};\nexport const GET_SESSIONS = {\n  url: `${root}sessions.json?`,\n  mth: 'GET',\n};\n\n/*\n  *** API QUERY IMPLEMENTATION ***\n*/\n\nconst parseQueryParams = obj =>\n  Object.keys(obj).reduce(\n    (acc, key, idx) =>\n      `${acc}${idx ? '&' : ''}${encodeURIComponent(key)}=${encodeURIComponent(\n        obj[key]\n      )}`,\n    ''\n  );\n\nconst setURLParams = (endPoint, URLParams) =>\n  endPoint.url.replace('##', URLParams);\n\nconst composeEndPoint = (endPoint, URLParams, queryParams) =>\n  `${setURLParams(endPoint, URLParams)}${parseQueryParams(queryParams)}`;\n\nconst init = ({ mth, auth }, data) => {\n  const JWT = localStorage.getItem('trademe.AuthToken');\n  return Object.assign(\n    {},\n    {\n      method: mth,\n      headers: {\n        Accept: 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n    },\n    data ? { body: JSON.stringify(data) } : {},\n    auth && JWT ? { headers: { authorization: `Bearer ${JWT}` } } : {}\n  );\n};\n\nconst API = (endPoint, URLParams = '', queryParams = {}, data) =>\n  fetch(\n    composeEndPoint(endPoint, URLParams, queryParams),\n    init(endPoint, data)\n  );\n\nexport default API;\n","import createHistory from 'history/createBrowserHistory';\nexport const history = createHistory();\n","import styled from 'styled-components';\n\nimport img1 from 'assets/images/step1.gif';\nimport img2 from 'assets/images/step2.gif';\nimport img3 from 'assets/images/step3.gif';\n\nconst COMPLETED = 'COMPLETED';\n\nexport const StepContainer = styled.div`\n  padding: 1.5rem;\n`;\n\nexport const CallToAction = styled.div`\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  justify-content: center;\n  color: #389822;\n  font-weight: bold;\n  height: 200px;\n  margin-bottom: 1rem;\n`;\n\nexport const CallToAction1 = CallToAction.extend`\n  ${({ status }) =>\n    status !== COMPLETED\n      ? `background: center / cover no-repeat url(${img1})`\n      : ''};\n`;\n\nexport const CallToAction2 = CallToAction.extend`\n  ${({ status }) =>\n    status !== COMPLETED\n      ? `background: center / cover no-repeat url(${img2})`\n      : ''};\n`;\n\nexport const CallToAction3 = CallToAction.extend`\n  ${({ status }) =>\n    status !== COMPLETED\n      ? `background: center / cover no-repeat url(${img3})`\n      : ''};\n`;\n\nexport const GreenCircle = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 80px;\n  height: 80px;\n  border-radius: 50px;\n  border: solid 2px #389822;\n  font-size: 2rem;\n  margin-bottom: 1.5rem;\n`;\n\nexport const StepCounter = styled.div`\n  font-size: 1.1rem;\n  font-weight: 300;\n  margin: 1rem 0;\n`;\n\nexport const StepTitle = styled.h3`\n  font-size: 1.5rem;\n  font-weight: bold;\n  margin-bottom: 0.5rem;\n`;\n\nexport const StepBodyText = styled.p`\n  font-size: 1rem;\n  margin: 0 0 1.4rem 0;\n`;\n\nexport const RedoLink = styled.div`\n  font-weight: bold;\n  color: #007dc2;\n  text-align: center;\n  margin-top: 1rem;\n  :hover {\n    cursor: pointer;\n  }\n  font-size: 1rem;\n`;\n","// @flow\nimport * as React from 'react';\n\ntype IconProps = {\n  icon: string,\n  size?: string,\n  color?: string,\n};\n\nconst Icon = ({ icon, size, color, ...props }: IconProps) => {\n  const style = color ? { fill: color } : {};\n  return (\n    <svg\n      height={size}\n      width={size}\n      role=\"img\"\n      aria-label={`${icon} Icon`}\n      {...props}\n    >\n      <use xlinkHref={`/assets/images/svgs.svg#${icon}`} style={style} />\n    </svg>\n  );\n};\n\nIcon.defaultProps = {\n  size: 25,\n};\n\ntype LogoSize = {\n  w: number,\n  h: number,\n};\n\nconst sizes = {\n  full: { w: 49, h: 24 },\n};\n\nconst calcWitdh = (logSize: LogoSize, svgHeight: number = 25) =>\n  Math.round(logSize.w * svgHeight / logSize.h);\n\ntype LogoProps = {\n  logo: string,\n  size?: number,\n  color?: string,\n  class?: string,\n};\n\nexport const Logo = ({ logo, size, color, ...props }: LogoProps) => {\n  const style = color ? { fill: color } : {};\n  return (\n    <svg\n      width={calcWitdh(sizes[logo], size)}\n      height={size}\n      className={props.class}\n      role=\"img\"\n      aria-label=\"Logo\"\n    >\n      <use xlinkHref={`./assets/images/svgs.svg#${logo}`} style={style} />\n    </svg>\n  );\n};\n\nLogo.defaultProps = {\n  logo: 'full',\n  size: 25,\n};\n\nexport default Icon;\n","// @flow\n\nimport * as React from 'react';\n\nimport { StyledButton } from './styled';\n\ntype Props = {\n  children?: React.Node,\n};\n\nconst Button = ({ children, ...props }: Props) => (\n  <StyledButton {...props}>{children}</StyledButton>\n);\n\nexport default Button;\n","// @flow\n\nimport { uuidV1 } from 'util/helpers';\nimport {\n  FACE_DETECTION,\n  SAVE_VIDEO,\n  INIT_BIOMETRIC_ID_SESSION,\n  SWITCH_SETTING,\n  SET_SETTING,\n} from './constants';\nimport { BIO_ID_FACE_DETECTION, BIO_ID_SAVE_VIDEO } from 'web-api';\nimport API from 'util/api-interface';\n\nexport const faceDetection = ({ data }: any) => dispatch =>\n  API(BIO_ID_FACE_DETECTION, 'coordinates', {}, data).then(\n    json => dispatch({ type: FACE_DETECTION, json: json.data }),\n    err => {\n      throw new Error(err);\n    }\n  );\n\ntype SaveVideo = {\n  sessionId: string,\n  stepNumber: number,\n  videoData: Array<any> | Blob,\n  videoOptions: VideoOptions,\n};\nexport const saveVideo = ({\n  sessionId,\n  stepNumber,\n  videoData,\n  videoOptions,\n}: SaveVideo) => (dispatch: Function) =>\n  API(\n    BIO_ID_SAVE_VIDEO,\n    '',\n    {},\n    { sessionId, stepNumber, videoData, videoOptions }\n  ).then(\n    json => dispatch({ type: SAVE_VIDEO, json }),\n    err => {\n      throw new Error(err);\n    }\n  );\n\nexport const initBiometricIdSession = () => ({\n  type: INIT_BIOMETRIC_ID_SESSION,\n  id: uuidV1(),\n});\n\nexport const switchSetting = (setting: string) => ({\n  type: SWITCH_SETTING,\n  setting,\n});\n\nexport const setSetting = (setting: string, value: string) => ({\n  type: SET_SETTING,\n  setting,\n  value,\n});\n","import styled from 'styled-components';\n\nexport const Container = styled.section`\n  display: flex;\n  justify-content: center;\n`;\n\nexport const Content = styled.div`\n  position: relative;\n  display: flex;\n  flex-flow: column;\n  max-width: 500px;\n  min-width: 320px;\n  width: 100%;\n  height: 100%;\n  padding: 1rem;\n`;\n\nexport const Option = styled.div`\n  padding: 0.5rem 0.2rem;\n  font-size: 1.1rem;\n  color: #007dc2;\n`;\n\nexport const Title = styled.h1`\n  font-size: 1.5em;\n`;\n\nexport const OptionWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n","// @flow\nimport * as React from 'react';\n\nimport { ProgressBarStyled } from './styled';\n\ntype Props = {\n  style?: string,\n  value: number,\n  border?: number,\n  color?: string,\n  background?: string,\n  bgOpacity?: number,\n  timeTransform?: number,\n};\ntype State = {\n  viewBox: string,\n  strokeDasharray: string,\n  percent: number,\n  speedTransform: number,\n};\n\nclass ProgressBar extends React.Component<Props, State> {\n  static defaultProps = {\n    style: 'lineal',\n    value: 0,\n    border: 5,\n    color: '#0f0',\n    background: '#ccc',\n    bgOpacity: 1,\n    timeTransform: 0,\n  };\n  viewBoxSize = 235;\n  state: State = {\n    viewBox: `0 0 ${this.viewBoxSize} ${this.viewBoxSize}`,\n    strokeDasharray: '0 725',\n    percent: 0,\n    speedTransform: 0,\n  };\n\n  meter: any; // No Flow type for SVGs\n\n  constructor(props: Props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    this.setBorder();\n    this.updateMeter();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.value !== this.props.value) this.updateMeter();\n  }\n\n  setBorder = () => {\n    // If border adjust SVG viewBox\n    const { border, style } = this.props;\n    const offset = parseInt(border, 10);\n    const height = style === 'lineal' ? offset : this.viewBoxSize + offset;\n    if (this.props.border) {\n      this.setState({\n        viewBox: `-${offset / 2} -${offset / 2} ${this.viewBoxSize +\n          offset} ${height}`,\n      });\n    }\n  };\n\n  updateMeter = () => {\n    if (this.meter) {\n      const value =\n        this.props.value > 100\n          ? 100\n          : this.props.value < 0\n            ? 0\n            : this.props.value;\n      const length = this.meter.getTotalLength();\n      const newPercent = value * length / 100;\n      let speed;\n      if (this.props.timeTransform) {\n        const fixedIncrement = 0.3;\n        speed =\n          (newPercent - this.state.percent) *\n            this.props.timeTransform /\n            length +\n          fixedIncrement;\n      } else {\n        speed = 0;\n      }\n      this.setState({\n        strokeDasharray: `${newPercent} ${length}`,\n        percent: newPercent,\n        speedTransform: speed,\n      });\n    }\n  };\n\n  render() {\n    const { style, border, color, background, bgOpacity } = this.props;\n    const { viewBox, speedTransform, strokeDasharray } = this.state;\n    return (\n      <ProgressBarStyled\n        viewBox={viewBox}\n        border={border}\n        speed={speedTransform}\n      >\n        <path\n          stroke={background}\n          d={\n            style === 'lineal'\n              ? `M0 0 L${this.viewBoxSize} 0`\n              : 'M117.06,2A115.06,115.06,0,1,1,2,117.06,115.19,115.19,0,0,1,117.06,2Z'\n          }\n          fill=\"none\"\n          strokeOpacity={bgOpacity}\n        />\n        <path\n          ref={meter => {\n            this.meter = meter;\n          }}\n          stroke={color}\n          d={\n            style === 'lineal'\n              ? `M0 0 L${this.viewBoxSize} 0`\n              : 'M117.06,2A115.06,115.06,0,1,1,2,117.06,115.19,115.19,0,0,1,117.06,2Z'\n          }\n          fill=\"none\"\n          strokeDasharray={strokeDasharray}\n        />\n      </ProgressBarStyled>\n    );\n  }\n}\n\nexport default ProgressBar;\n","import * as types from './action-types';\nimport { DUMMY } from 'web-api';\nimport API from 'util/api-interface';\n\nexport const mobilePanelSwitch = () => ({\n  type: types.MOBILE_PANEL_SWITCH,\n});\n\nexport const storeActiveURL = payload => ({\n  type: types.STORE_ACTIVE_ROUTE,\n  payload,\n});\n\nexport const loadDummy = () => ({\n  type: types.LOAD_DUMMY,\n  promise: API(DUMMY, 'dummyfile'),\n});\n","// BIOMETRIC IDENTIFICATION\nexport const REQUEST_SESSIONS = 'REQUEST_SESSIONS';\n","// BIOMETRIC IDENTIFICATION\nexport const FACE_DETECTION = 'FACE_DETECTION';\nexport const SAVE_VIDEO = 'SAVE_VIDEO';\nexport const INIT_BIOMETRIC_ID_SESSION = 'INIT_BIOMETRIC_ID_SESSION';\n\n// SETTINGS\nexport const SWITCH_SETTING = 'SWITCH_SETTING';\nexport const SET_SETTING = 'SET_SETTING';\n","export const MOBILE_PANEL_SWITCH = 'MOBILE_PANEL_SWITCH';\nexport const STORE_ACTIVE_ROUTE = 'STORE_ACTIVE_ROUTE';\nexport const LOAD_DUMMY = 'LOAD_DUMMY';\n","/* eslint-disable */\nexport const setLog = () => {\n  window.log = function() {\n    console.log(Array.prototype.slice.call(arguments));\n  };\n};\n/* eslint-enable */\n\nexport const uuidV1 = function b(a) {\n  return a\n    ? (a ^ ((Math.random() * 16) >> (a / 4))).toString(16)\n    : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, b);\n};\n\nexport const toCurrency = (value = 0) => {\n  const decimals = value > 999 ? 0 : 2;\n  return value\n    ? `$${value.toLocaleString('nz-NZ', {\n        minimumFractionDigits: decimals,\n        maximumFractionDigits: decimals,\n      })}`\n    : '';\n};\n\nexport const shadeColor = (color, percent) => {\n  const f = parseInt(color.slice(1), 16);\n  const t = percent < 0 ? 0 : 255;\n  const p = percent < 0 ? percent * -1 : percent;\n  const R = f >> 16;\n  const G = (f >> 8) & 0x00ff;\n  const B = f & 0x0000ff;\n  return (\n    '#' +\n    (\n      0x1000000 +\n      (Math.round((t - R) * p) + R) * 0x10000 +\n      (Math.round((t - G) * p) + G) * 0x100 +\n      (Math.round((t - B) * p) + B)\n    )\n      .toString(16)\n      .slice(1)\n  );\n};\n\nexport function wait(delayInMS) {\n  return new Promise(resolve => setTimeout(resolve, delayInMS));\n}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\n/* eslint-disable */\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import styled, { injectGlobal } from 'styled-components';\n\nimport {\n  grtMediumViewport,\n  mainFontFamily,\n  textBaseColor,\n  backgroundColor,\n} from 'styles/helpers';\n\n/* eslint-disable */\ninjectGlobal`\n  html, body {\n    height: 100%;\n    width: 100%;\n    padding: 0;\n    margin: 0;\n    background: ${backgroundColor};\n    font-size: 14px;\n    @media ${grtMediumViewport} {\n      font-size: 16px;\n    }\n    font-family: ${mainFontFamily};\n    color: ${textBaseColor};\n  }\n  html {\n    /* Avoid scrollbar space moving when showing mask\n      it scrolls up to the view so no cool\n    */\n    // overflow-y: scroll;\n  }\n\n  * {\n    box-sizing: border-box;\n  }\n`;\n/* eslint-enable */\n\nexport const Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n`;\n\nexport const Container = styled.div`\n  flex: 1 1 auto;\n`;\n\nexport const PanelMask = styled.div`\n  position: fixed;\n  z-index: 100;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.5s, visibility 0.5s;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: black;\n  ${({ active }) =>\n    active &&\n    `\n    visibility: visible;\n    opacity: .4;\n    transition: opacity 0.5s, visibility 0.5s;\n  `};\n`;\n","import styled from 'styled-components';\n\nexport const Panel = styled.nav`\n  position: absolute;\n  z-index: 200;\n  transition: transform 0.3s;\n  height: 100%;\n  top: 0;\n  left: 0;\n  transform: ${({ active }) =>\n    active ? 'translateX(0)' : 'translateX(-100%)'};\n`;\n","// @flow\n\nimport * as React from 'react';\n\nimport { Panel } from './styled';\n\ntype Props = {\n  active: boolean,\n  children?: React.Node,\n};\n\nconst PanelComponent = ({ active, children }: Props) => (\n  <Panel active={active}>{children}</Panel>\n);\n\nexport default PanelComponent;\n","import styled from 'styled-components';\nimport { Link } from 'react-router-dom';\n\nimport { white, glacier10, tipTop500 } from 'styles/helpers';\n\nexport const MobileMenu = styled.nav`\n  width: 300px;\n  height: 100%;\n  background-color: ${white};\n  a {\n    text-decoration: none;\n    :hover {\n      text-decoration: underline;\n    }\n  }\n`;\n\nexport const Header = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding: 15px 15px 15px 25px;\n  height: 60px;\n  background-color: ${glacier10};\n`;\n\nexport const CloseButton = styled.div`\n  cursor: pointer;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  -webkit-tap-highlight-color: transparent;\n`;\n\nexport const Options = styled.div`\n  padding: 20px 5px 15px 25px;\n  display: flex;\n  flex-flow: column;\n  align-items: flex-start;\n`;\n\nexport const Option = styled(Link)`\n  display: flex;\n  align-items: center;\n  margin: 0.8rem 0;\n  span {\n    color: ${tipTop500};\n    margin-left: 20px;\n  }\n`;\n","// @flow\n\nimport * as React from 'react';\n\nimport { MobileMenu, Header, CloseButton, Options, Option } from './styled';\n\nimport { tipTop500 } from 'styles/helpers';\n\nimport Icon from 'components/Icons';\nimport SidePanel from 'components/SidePanel';\n\nconst options = [\n  { icon: 'perm-identity', label: 'Home', url: '/' },\n  { icon: 'camera-front', label: 'Biometric ID', url: '/biometric-id' },\n  { icon: 'video-library', label: 'Review tool', url: '/sessions-review' },\n  { icon: 'settings', label: 'Settings', url: '/settings' },\n];\n\ntype Props = {\n  mobilePanelSwitch: Function,\n  mobilePanel: boolean,\n};\n\nclass MobilePanel extends React.Component<Props> {\n  componentWillUpdate({ mobilePanel }: Props) {\n    const body = document.body;\n    if (body) {\n      body.className = mobilePanel ? 'active_panel' : '';\n      if (mobilePanel) {\n        (document.addEventListener: Function)(\n          'click',\n          this.clickHandler,\n          false\n        );\n      } else {\n        (document.removeEventListener: Function)(\n          'click',\n          this.clickHandler,\n          false\n        );\n      }\n    }\n  }\n\n  shouldComponentUpdate = (next: Props) =>\n    this.props.mobilePanel !== next.mobilePanel;\n\n  clickHandler = (e: any) => {\n    const mobBar = document.querySelector('#mob-bar');\n    if (mobBar && !mobBar.contains(e.target)) {\n      this.props.mobilePanelSwitch();\n    }\n  };\n\n  render() {\n    const { mobilePanel, mobilePanelSwitch } = this.props;\n    return (\n      <aside>\n        <SidePanel active={mobilePanel}>\n          <MobileMenu id=\"mob-bar\">\n            <Header>\n              <CloseButton onClick={mobilePanelSwitch}>\n                <Icon icon=\"close\" size=\"40\" color={tipTop500} />\n              </CloseButton>\n            </Header>\n            <Options>{renderOptions(options, mobilePanelSwitch)}</Options>\n          </MobileMenu>\n        </SidePanel>\n      </aside>\n    );\n  }\n}\n\nconst renderOptions = (options, mobilePanelSwitch) =>\n  options.map(({ icon, label, url }, idx) => (\n    <Option to={url} key={idx} onClick={mobilePanelSwitch}>\n      <Icon icon={icon} size=\"24\" color={tipTop500} />\n      <span>{label}</span>\n    </Option>\n  ));\n\nexport default MobilePanel;\n","import styled from 'styled-components';\n\nimport { maxContentWidth } from 'styles/helpers';\n\nexport const MobileBar = styled.section`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 60px;\n  padding: 0 10px 0 10px;\n  border-bottom: solid 1px lightgray;\n  nav {\n    display: flex;\n    width: 100%;\n    max-width: ${maxContentWidth};\n    justify-content: space-between;\n    align-items: center;\n  }\n`;\n\nexport const LinkButton = styled.div`\n  cursor: pointer;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  -webkit-tap-highlight-color: transparent;\n`;\n","// @flow\n\nimport * as React from 'react';\n\nimport { MobileBar, LinkButton } from './styled';\n\nimport Icon from 'components/Icons';\n\nconst $silverFern500 = '#666';\n\ntype Props = {\n  mobilePanelSwitch: Function,\n};\n\nclass MobileBarComponent extends React.Component<Props> {\n  openMobilePanel = (e: SyntheticEvent<HTMLButtonElement>) => {\n    this.props.mobilePanelSwitch();\n    e.stopPropagation();\n  };\n\n  render = () => {\n    return (\n      <MobileBar>\n        <nav>\n          <LinkButton onClick={this.openMobilePanel}>\n            <Icon icon=\"edit-hamburger-menu\" size=\"30\" color={$silverFern500} />\n          </LinkButton>\n          <h3>Biometric Identification</h3>\n          <div />\n        </nav>\n      </MobileBar>\n    );\n  };\n}\n\nexport default MobileBarComponent;\n","import React from 'react';\n\nimport MobileBar from './MobileBar';\n\nconst Header = props => (\n  <header>\n    <MobileBar {...props} />\n  </header>\n);\n\nexport default Header;\n","import styled from 'styled-components';\n\nimport { white, maxContentWidth, generalMargin } from 'styles/helpers';\n\nexport const Copyright = styled.section`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 30px;\n  padding: 2rem ${generalMargin} 2rem ${generalMargin};\n  font-size: 0.8rem;\n  background: ${white};\n`;\n\nexport const Content = styled.div`\n  flex: 1;\n  max-width: ${maxContentWidth};\n`;\n","import React from 'react';\n\nimport { Copyright, Content } from './styled';\n\nconst TopBar = () => (\n  <Copyright>\n    <Content>\n      <div>&copy; 2018</div>\n    </Content>\n  </Copyright>\n);\n\nexport default TopBar;\n","export const white = '#FFF';\nexport const black = '#000';\n\nexport const meaningColors = {\n  success: '#00BC82',\n  info: '#3DA5EB',\n  warning: '#FFCB4F',\n  danger: '#D93A3F',\n};\n\nexport const blueBase = '#fAA819';\nexport const textBaseColor = '#002f6b';\nexport const backgroundColor = 'white';\n\nexport const glacier500 = '#5F6F88';\n\nexport const hokeyPokey200 = '#FFD35F';\nexport const hokeyPokey300 = '#FFCB4F';\nexport const hokeyPokey400 = '#FFC041';\nexport const hokeyPokey500 = '#F9AF2C';\n\nexport const jaffa700 = '#d54209';\n\nexport const tasman50 = '#AADCFE';\nexport const tasman200 = '#6BBCF4';\nexport const tasman400 = '#3DA5EB';\nexport const tasman500 = '#279BE9';\n\nexport const silverFern5 = '#FBFBFB';\nexport const silverFern10 = '#F7F7F7';\nexport const silverFern15 = '#F0F0F0';\nexport const silverFern20 = '#E9E9E9';\nexport const silverFern30 = '#DADADA';\nexport const silverFern50 = '#C9C9C9';\nexport const silverFern100 = '#B9B9B9';\nexport const silverFern200 = '#A1A1A1';\nexport const silverFern300 = '#888';\nexport const silverFern400 = '#777';\nexport const silverFern500 = '#666';\nexport const silverFern600 = '#555';\nexport const silverFern700 = '#444';\nexport const silverFern800 = '#333';\nexport const silverFern900 = '#222';\n\nexport const tipTop20 = '#E3ECFF';\nexport const tipTop30 = '#D0DFFF';\nexport const tipTop200 = '#84ACFA';\nexport const tipTop400 = '#4D80E5';\nexport const tipTop500 = '#3B71DC';\nexport const tipTop700 = '#2656B7';\n\nexport const waitomo500 = '#00BC82';\n\nexport const glacier10 = '#F4F6FC';\n","export const mainFontFamily = 'Open Sans';\nexport const maxContentWidth = '1400px';\nexport const minContentWidth = '320px';\nexport const xsmallBreakpoint = '320px'; // Iphone 5\nexport const smallBreakpoint = '480px';\nexport const mediumBreakpoint = '768px';\nexport const largeBreakpoint = '1024px';\nexport const xLargeBreakpoint = '1440px';\nexport const generalMargin = '1rem';\n\nexport const xsmallViewport = '(max-width: 375px)';\nexport const smallViewport = '(max-width: 480px)';\nexport const grtSmallViewport = '(min-width: 481px)';\nexport const mediumViewport = '(min-width: 480px) and (max-width: 768px)';\nexport const grtMediumViewport = '(min-width: 769px)';\nexport const largeViewport = '(min-width: 1024px) and (max-width: 1440px)';\nexport const xlargeViewport = '(min-width: 1441px)';\n","import styled from 'styled-components';\n\nimport { minContentWidth } from 'styles/helpers';\n\nexport const Footer = styled.footer`\n  min-width: ${minContentWidth};\n  border-top: solid 1px #ccc;\n`;\n","// @flow\n\nimport React from 'react';\n\nimport { Footer } from './styled';\n\nimport CopyrightBar from './CopyrightBar';\n\nconst FooterComponent = () => {\n  return (\n    <Footer>\n      <CopyrightBar />\n    </Footer>\n  );\n};\n\nexport default FooterComponent;\n","// @flow\n\nimport * as React from 'react';\n// import { withRouter } from 'react-router';\n\ntype Props = {\n  children?: React.Node,\n};\n\nclass ScrollToTop extends React.Component<Props> {\n  // componentDidUpdate(prevProps) {\n  //   if (this.props.location !== prevProps.location) {\n  //     window.scrollTo(0, 0);\n  //   }\n  // }\n\n  render() {\n    return <span>{this.props.children}</span>;\n  }\n}\n\n// export default withRouter(ScrollToTop);\nexport default ScrollToTop;\n","import styled from 'styled-components';\n\nexport const Toogle = styled.div`\n  border: 1px solid #ccc;\n  width: 50px;\n  height: 22px;\n  min-width: 50px;\n  border-radius: 13px;\n  cursor: ${({ enabled }) => (enabled ? 'pointer' : 'not-allowed')};\n  display: inline-block;\n  background: ${({ on }) => (on ? 'GreenYellow ' : 'Gainsboro')};\n  transition: background 0.5s;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  -webkit-tap-highlight-color: transparent;\n`;\n\nexport const Switch = styled.div`\n  border: 1px solid #999;\n  box-shadow: 1px 1px 1px #ccc;\n  width: 28px;\n  height: 28px;\n  top: -4px;\n  left: ${({ on }) => (on ? '23px' : '-1px')};\n  border-radius: 50%;\n  background: white;\n  position: relative;\n  transition: left 0.2s ease-in-out;\n`;\n","// @flow\nimport * as React from 'react';\n\nimport { Toogle, Switch } from './styled';\n\ntype Props = {\n  on: boolean,\n  onClick: Function,\n  enabled: boolean,\n};\n\nclass ToogleComponent extends React.Component<Props> {\n  static defaultProps = {\n    on: true,\n    onClick: () => {},\n    enabled: true,\n  };\n\n  constructor(props: Props) {\n    super(props);\n  }\n\n  render() {\n    const { on, enabled, onClick } = this.props;\n    return (\n      <Toogle on={on} enabled={enabled} onClick={() => onClick()}>\n        <Switch on={on} />\n      </Toogle>\n    );\n  }\n}\n\nexport default ToogleComponent;\n","// @flow\n\nimport * as React from 'react';\n\nimport { Option, OptionWrapper } from './styled';\nimport Toogle from 'components/Toogle';\n\ntype ToogleOptionProps = {\n  label: string,\n  on: boolean,\n  onClick: Function,\n};\n\nexport const ToogleOption = ({ label, on, onClick }: ToogleOptionProps) => (\n  <Option>\n    <OptionWrapper>\n      {label}\n      <Toogle on={on} onClick={onClick} />\n    </OptionWrapper>\n  </Option>\n);\n\ntype OptionsGroupOptionProps = {\n  label: string,\n  options: Array<any>,\n  name: string,\n  selected: string,\n  onChange: Function,\n};\n\nexport const OptionsGroupOption = ({\n  label,\n  options,\n  name,\n  selected,\n  onChange,\n}: OptionsGroupOptionProps) => (\n  <Option>\n    <OptionWrapper>\n      <div>{label}</div>\n      <div>\n        {options.map((value, idx) => (\n          <React.Fragment key={idx}>\n            <input\n              id={value}\n              type=\"radio\"\n              name={name}\n              value={value}\n              checked={selected === value}\n              onChange={onChange}\n            />\n            <label htmlFor={value}>{value}</label>\n          </React.Fragment>\n        ))}\n      </div>\n    </OptionWrapper>\n  </Option>\n);\n\ntype RangeOptionProps = {\n  label: string,\n  value: string,\n  min: string,\n  max: string,\n  onChange: Function,\n};\n\nexport const RangeOption = ({\n  label,\n  value,\n  min,\n  max,\n  onChange,\n}: RangeOptionProps) => (\n  <Option>\n    <OptionWrapper>\n      <div>{label}</div>\n      <input\n        type=\"range\"\n        min={min}\n        max={max}\n        value={value}\n        onChange={onChange}\n        className=\"slider\"\n      />\n    </OptionWrapper>\n  </Option>\n);\n","// @flow\nimport * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { switchSetting, setSetting } from 'app/BiometricID/actions';\nimport { ToogleOption, OptionsGroupOption, RangeOption } from './options';\nimport { Container, Content, Title } from './styled';\n\ntype Props = {\n  autoStartOnDetection: boolean,\n  switchSetting: Function,\n  setSetting: Function,\n  framesPerSecond: string,\n  captureVideo: boolean,\n  recordingTime: string,\n  speechRecognition: boolean,\n  useMediaRecorderApi: boolean,\n  faceAngleDetection: boolean,\n  faceDetection: boolean,\n  overlayAutoRotation: boolean,\n  imageType: string,\n  idType: string,\n  resolution: string,\n  videoQuality: string,\n  videoCodec: string,\n};\n\ntype State = {\n  cameraResolutions: Array<string>,\n};\n\nexport class Settings extends React.Component<Props, State> {\n  state = { cameraResolutions: [] };\n\n  constructor(props: Props) {\n    super(props);\n    this.detectVideoSizes();\n    console.log(this.cameraResolutions);\n  }\n\n  detectVideoSizes = (idx = 0) => {\n    const cstList = [\n      { w: 1600, h: 1200 },\n      { w: 1280, h: 720 },\n      { w: 640, h: 480 },\n      { w: 320, h: 240 },\n    ];\n    navigator.mediaDevices\n      .getUserMedia({\n        video: {\n          width: { exact: cstList[idx].w },\n          height: { exact: cstList[idx].h },\n        },\n      })\n      .then(stream => {\n        stream.getTracks().forEach(track => track.stop());\n        this.setState({\n          cameraResolutions: [\n            ...this.state.cameraResolutions,\n            `${cstList[idx].w}x${cstList[idx].h}`,\n          ],\n        });\n        if (cstList[idx + 1]) this.detectVideoSizes(idx + 1);\n      })\n      .catch(err => {\n        if (cstList[idx + 1]) this.detectVideoSizes(idx + 1);\n        log('invalid:', cstList[idx], err);\n      });\n  };\n\n  render = () => {\n    const {\n      autoStartOnDetection,\n      switchSetting,\n      setSetting,\n      captureVideo,\n      recordingTime,\n      speechRecognition,\n      useMediaRecorderApi,\n      faceAngleDetection,\n      faceDetection,\n      overlayAutoRotation,\n      framesPerSecond,\n      imageType,\n      idType,\n      resolution,\n      videoQuality,\n      videoCodec,\n    } = this.props;\n    return (\n      <Container>\n        <Content>\n          <Title>Settings</Title>\n\n          <h3 style={{ marginBottom: '0' }}>Video</h3>\n          <ToogleOption\n            label=\"Capture video\"\n            on={captureVideo}\n            onClick={() => switchSetting('captureVideo')}\n          />\n          <OptionsGroupOption\n            label=\"Video codec\"\n            name=\"video-codec\"\n            onChange={e => setSetting('videoCodec', e.target.value)}\n            selected={videoCodec}\n            options={['h264', 'Webm']}\n          />\n          <OptionsGroupOption\n            label=\"Key frames format\"\n            name=\"image-format\"\n            onChange={e => setSetting('imageType', e.target.value)}\n            selected={imageType}\n            options={['jpeg', 'png']}\n          />\n          <OptionsGroupOption\n            label=\"Resolution\"\n            name=\"resolution\"\n            onChange={e => setSetting('resolution', e.target.value)}\n            selected={resolution}\n            options={this.state.cameraResolutions}\n          />\n          <RangeOption\n            label={`Quality ${videoQuality}%`}\n            value={videoQuality}\n            min=\"1\"\n            max=\"100\"\n            onChange={e => setSetting('videoQuality', e.target.value)}\n          />\n          <RangeOption\n            label={`Frames per second ${framesPerSecond}fps`}\n            value={framesPerSecond}\n            min=\"5\"\n            max=\"30\"\n            onChange={e => setSetting('framesPerSecond', e.target.value)}\n          />\n          <RangeOption\n            label={`Recording time ${recordingTime}s`}\n            value={recordingTime}\n            min=\"1\"\n            max=\"10\"\n            onChange={e => setSetting('recordingTime', e.target.value)}\n          />\n          <ToogleOption\n            label=\"Use MediaRecorder API (supported browsers)\"\n            on={useMediaRecorderApi}\n            onClick={() => switchSetting('useMediaRecorderApi')}\n          />\n\n          <h3 style={{ marginBottom: '0' }}>Biometric Identification</h3>\n          <OptionsGroupOption\n            label=\"Id type\"\n            name=\"idType\"\n            onChange={e => setSetting('idType', e.target.value)}\n            selected={idType}\n            options={['Passport', 'Driver License']}\n          />\n          <ToogleOption\n            label=\"Face detection and tracking\"\n            on={faceDetection}\n            onClick={() => switchSetting('faceDetection')}\n          />\n          <ToogleOption\n            label=\"Face angle detection\"\n            on={faceAngleDetection}\n            onClick={() => switchSetting('faceAngleDetection')}\n          />\n          <ToogleOption\n            label=\"Auto start recording on detection\"\n            on={autoStartOnDetection}\n            onClick={() => switchSetting('autoStartOnDetection')}\n          />\n          <ToogleOption\n            label=\"Speech recognition (supported browsers)\"\n            on={speechRecognition}\n            onClick={() => switchSetting('speechRecognition')}\n          />\n\n          <h3 style={{ marginBottom: '0' }}>Miscellaneous</h3>\n          <ToogleOption\n            label=\"Overlay Portrait/Landscape auto rotation\"\n            on={overlayAutoRotation}\n            onClick={() => switchSetting('overlayAutoRotation')}\n          />\n        </Content>\n      </Container>\n    );\n  };\n}\n\nconst mapStateToProps = ({\n  biometricId: {\n    settings: {\n      autoStartOnDetection,\n      captureVideo,\n      recordingTime,\n      speechRecognition,\n      useMediaRecorderApi,\n      faceAngleDetection,\n      faceDetection,\n      overlayAutoRotation,\n      framesPerSecond,\n      imageType,\n      idType,\n      resolution,\n      videoQuality,\n      videoCodec,\n    },\n  },\n}) => ({\n  autoStartOnDetection,\n  captureVideo,\n  recordingTime,\n  speechRecognition,\n  useMediaRecorderApi,\n  faceAngleDetection,\n  faceDetection,\n  overlayAutoRotation,\n  framesPerSecond,\n  imageType,\n  idType,\n  resolution,\n  videoQuality,\n  videoCodec,\n});\n\nexport default connect(mapStateToProps, {\n  switchSetting,\n  setSetting,\n})(Settings);\n","// @flow\n\nimport { REQUEST_SESSIONS } from './constants';\nimport { GET_SESSIONS } from 'web-api';\nimport API from 'util/api-interface';\n\nexport const requestSessions = () => dispatch =>\n  API(GET_SESSIONS, '', {}).then(\n    json => dispatch({ type: REQUEST_SESSIONS, json: json.data }),\n    err => {\n      throw new Error(err);\n    }\n  );\n","import styled from 'styled-components';\n\nexport const Title = styled.h1`\n  font-size: 1.5em;\n`;\n","// @flow\n\nimport * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { Title } from './styled';\nimport * as appActions from './actions';\n\ntype Props = {\n  requestSessions: Function,\n  sessions: Array<any>,\n};\n\nclass SessionsReview extends React.Component<Props> {\n  socket: Socket;\n\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    this.socket = new WebSocket('ws://localhost:8080');\n    this.socket.addEventListener('open', event => {\n      log('Sockets opened in client', event);\n      this.socket.send('Hello Server!');\n      this.socket.onmessage = this.socketMsg;\n    });\n    this.props.requestSessions();\n  }\n\n  componentWillUnmount() {\n    this.socket.close();\n  }\n\n  socketMsg = event => {\n    log('Message from server ', event.data);\n    this.props.requestSessions();\n  };\n\n  render = () => (\n    <section>\n      <Title>SessionsReview</Title>\n      <ul>\n        {this.props.sessions\n          ? this.props.sessions.list.map((session, idx) => (\n              <li key={idx}>\n                {session.id}\n                <br />\n                {session.step1 ? <span>step1</span> : null}\n                {session.step2 ? <span>step2</span> : null}\n                {session.step3 ? <span>step3</span> : null}\n              </li>\n            ))\n          : null}\n      </ul>\n    </section>\n  );\n}\n\nconst mapStateToProps = ({ sessions }) => ({\n  sessions,\n});\n\nexport default connect(mapStateToProps, {\n  ...appActions,\n})(SessionsReview);\n","import styled from 'styled-components';\n\nexport const Container = styled.div`\n  display: flex;\n  justify-content: center;\n`;\n\nexport const Content = styled.div`\n  position: relative;\n  display: flex;\n  flex-flow: column;\n  max-width: 600px;\n  min-width: 320px;\n  width: 100%;\n  height: 100%;\n`;\n\nexport const Title = styled.h1`\n  font-size: 3rem;\n  font-weight: 300;\n  padding: 0 1.5rem;\n`;\n\nexport const JoinStepTitle = styled.h2`\n  color: ${({ active }) => (active ? '#002f6b' : 'rgba(0, 47, 107, 0.5)')};\n  border: 0 solid #b2c0d2;\n  border-bottom-width: 1px;\n  :first-of-type {\n    border-top-width: 1px;\n  }\n  font-size: 1rem;\n  font-weight: 700;\n  line-height: 2.75rem;\n  letter-spacing: 0.128em;\n  font-size: 1rem;\n  padding: 0 1.5rem;\n  margin: 0;\n`;\n","import styled from 'styled-components';\n\nexport const Wrapper = styled.div`\n  display: flex;\n  flex-flow: column;\n  padding: 1.5rem;\n`;\n\nexport const GreenCircle = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 80px;\n  height: 80px;\n  border-radius: 50px;\n  border: solid 2px #389822;\n  font-size: 2rem;\n  margin-bottom: 1.5rem;\n`;\n","// @flow\n\nimport * as React from 'react';\n\nimport { history } from 'util/history';\nimport Button from 'components/Buttons';\nimport { Wrapper, GreenCircle } from './styled';\nimport { CallToAction } from '../Steps/styled';\n\nexport const End = () => (\n  <Wrapper>\n    <CallToAction>\n      <GreenCircle>&#10003;</GreenCircle>\n      <div>press “Restart demo” to reattempt.</div>\n    </CallToAction>\n    <Button\n      width=\"100%\"\n      onClick={() => history.push({ pathname: '/biometric-id' })}\n    >\n      Restart demo\n    </Button>\n  </Wrapper>\n);\n","module.exports = \"data:image/png;base64,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ZnlEYXRlPSIyMDE4LTAzLTE4VDE5OjAzOjM0KzAxOjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk2YTgwNTdlLWY2MDAtNGVmZi1iYjk3LTliZjE4NjFmYmRkNiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmNiNWUwNjFiLTFiNGMtYjk0MC04MzM0LTExMjc5MmFmZmJlZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjVmYTE0OWY2LWRkZjMtNGNiYS04MGY3LWE0M2IzZmNiMTQzNiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJHZW5lcmljIFJHQiBQcm9maWxlIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1ZmExNDlmNi1kZGYzLTRjYmEtODBmNy1hNDNiM2ZjYjE0MzYiIHN0RXZ0OndoZW49IjIwMTgtMDMtMThUMTk6MDM6MzQrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTZhODA1N2UtZjYwMC00ZWZmLWJiOTctOWJmMTg2MWZiZGQ2IiBzdEV2dDp3aGVuPSIyMDE4LTAzLTE4VDE5OjAzOjM0KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+GCvEFgAAEiRJREFUeJzlnHdcFMcXwOcQlR5KYkVpSpEqIhEB0YhGgwZjFAGRjgIRjIUAFpKIRIIVY+NQEaVIkagoUoKCKKggAoIoVZHe2x13B7fz++PIuVzdO+5IzO/7uT9m37yZt29ndmd25u3hIISAd0T4KPOx2OZd5xWX+qIzdgVcYNZOzioeU+x9YweJRCIPU+ka4aFenMzBv2np6oNjOfx7LIPkYkIuhFDewAOgpQOEIciRU9HZdx6WQghx/F1JUZbSJ89fow9NjRcwKPBjjXWjNbV00hJWW/azyIYQKpr6bPI9h3Z6nv5WdtdDVNVOBAAwRCS9b+zIK66hV1RdEkNLPMwrY22HuZUghAiCNDV3oiVy+u4QQlk9N9wAYUhKQoyhIgRBRERYuJqaU1b/oZOf68a9ia7GZkSG72b0hyf+yi2hp7+xCcRekLdbMe9pxcpl+gAAnS9dAQBKc2ZxuBzyBh60RHcfcdQnwhCZ+RRYCkPDExkkCIKwcyIp8wUtIapqN+qThNgUAMCxKxm0U6AlaEIG/H03AwBCTycCAHIelze3duFwOJYOTVazG3to/7GdIpMfMSRYQiCOeSCQKCMs1ahU5EZaEYRwgECCECII5KFHbN1+lKV8xbq9WIrz+STigwmyxPNos8HhZ1rixq1cHophbyEIYd6zCp706fD8aKCzLwhPpowcConmrLZ1H36MmU2+52g/dgXupD8zX7Or4HklWqiouYmlMsNdDKYv9mSpx07OwJ+p+VjMiJib6NIaiUiiiKraEUkUAIDmKn+6HM3qjQHow8qqxg3rTDB1AdpVklB3oFumpdldPQurPbSEmr49By8ZvaEZm6syOzI5DwAQmZw3V2U2h9PKuXsi/mYOPvp+TUksJj/Q3kAI13uF9w0MrfcKpx2y9MbQfAf68Cv2D5sVjqHb/PAQwqnz7JdvCwUzvvRmqccsP3Y2iVlNw9CBWUhDXt+dSCbL67vD8dw3WBBVtaUlsJopKqlml6Vn6s61OFYzJqt82GXV1DVzLY71CX0n7anC5zLscpnnnwxM0ECQkvrk9MXkutoGWRmZ76xXBB9wFJYljK3DH6HhiW9rGtnlaizaJnCLQvSH5YNP29hZw/CjG/EpOfxVLqvr6n4o+mzsg+mLPePvF9LlwvLn2Yu36MPfTt3w9T/PoNPZ3Xf+8l1tYxeeakYQ6HFgzMCNQKhjNTrRH33FOBqZnl9cBQCof99anvYbc7fUszqgNHc6AGCpoXqgxxqu3XjOrC/Qh4E/bmHWUZCT8XK1SvzzAa+3yGoLHfQxDoA3le/+zoRwnWc4wzXwPRInreVkahcireXkGxJHEw4SSVKaTiz1WWJhtZurznq7Q1iqQoMgCP0lhA7tbQTS+ht60IxIfNTc3ier60aXyOq6Nbf3RSR+fHfgMOFiYGCAuOo7f5ZZuU/KWY6ZXOHNn0kqti6BVxi0XQKvTFKxpR9i9wdNS1vP3YxnhcVsB0ssiKracvBndMkBTW95lJSk2Paga3Z7Il6+abTbE7E96JqUpFhveRSPvXyUlNQnJqt8Gps7Z0yTtVptbLRwHoTwQHAU/U2DJ2y+WwFwuB8ORKKFgwTSXu+NEMItG5cDCKHVjtPMV2JncOyiDUE7gxlXr9jpM2Ng5sFVZ7NLMJaq0PgciYtMftzS1a++0k96gbNvSDyEEJ/02PdIHKRPQ05d+yv/RRWWK7R0kfpuR0uuaofDYoN+2oqlQioViUt+uG3LSizKaJrb+5RMPN8XXJw17TO6UCjzHa+9f1w44YNdf4RKLat4Z6inhr2IvL5H/8AgLf2ZjHRXCX40g9fm5so3Nvv5KOXmc1Ig1gXvT8TVND5KIQi88Sefcx80E7ekMzH81/zhcz+EJ8gUive+P+YvdJirtXntpsBn2B6kfDL+LssZnS9dSstr0RIEgYbmO5pbu4VhTrj+GFmwXeqKu5nDYaGAb4Toj7ohi9dPApFET3Ndf+QDYflTXdvc1t7LILx8PT0i+v7lmEy6xOzrXXxUHnevcPpiz7OxD9wPRcvquaKzhOXPUqbVoLA/kl5XfYAQDhCG1PTtHzwqhRD6/RzJa80dPYMOfnj6IYJAeYOPE0XWW2ACeMyg0k0tXZbf7nnxKEJCXAwAICUhRlvsfPCodPKkSbzWvNw+BP0GjcOBjVZmHw/h2PHny82/Ks78XAS1bYRA2NLWnZ9wiCers9U3Knwur6Y6+6tli7xd100SZT0wkEhkMbGpPNU8Wc1uuDYeLUnKLN682pCWFgUA9A4MbT90dYg8DACgUEZunvmBoQo9qwPrvc4AAMSnTsYHO8tKi3O1KiklWZZ/iava06Lq5WY6XNV4oG+A+K33Gezd91vvM30DRK5q7r6nsNRmae2H3TQN+voxncSMj6+rAH1v0ejtJ8rqumqvDdReGyir69rbP3r2Szb/6n04FkLIXIQl5y6lclZAEBgcxuJ9kTOc/REhkYfRzVXd0G7vh8cf866tbqitbsAf87b3w1c3tAMASl5WJd1+BABgKMKOD03tFFSIBzPaxo4H/ezH0bdYwHibGn0ToKuuOPML2aHqmKHqmJlfyOqqKxp9EwAAGKqOaS+6iL3qo0Gudm5H2jv6WOYuMHZ5XXiN7/Nmxxh/KCNI/IW9sSm5Zoajr4pmhmqxKbnx5/dSRhA+ar957efKqg+Gyzwr3zaOmhim+vqfd9154vVznhdYIIRXbz9llxt16ylgCMGobWxfpD1XR1MFLdTWVDHUmVP3oV1TZQavZwAAsDDVKX50EQDw+NnrQcKQmfGCM79781EPRsa0j5byjNPRmU/yS9HC/PzS8KtZ/DlDp6y8vqSs5mVZzV+5JeOpp62zT0pSgkHY1TNIywIAtdNIY5qRJ4RQfL7DreySW9kl4vMd6EI6PK0nGll4XrhyDy15WVajYbitsprtPgo7EAQu+Drgp+NJgwQSWv6F0Q4IoebX/hBCRn8ghJIajnWNHbR0XWOHpIYjgwJGf2rqmncFMO4p0Hlb07jNMxRLPWg0LP0ghFPU7Af/nqc7+OET04sQBGqu/gmyHH8ghLmF1ZbOYZYux3ILWbyiYBl/Orr68NH3OesMU6iuPse5VoUGgVBCwwFC6BsSL73AWX2lX2tXP0Tty4MBwtBaDx7WitZ6nOQaygchXL2R9TI8A7X1zeWV77FbpyGn7+4ccKm+qbO+qdM54JKC/sddYhyEcJBI8vrlOpZRUmzq5Au/bGMOfWPAzv1o/KVAjLe4hdWe3HsnMSqjOReXgxMB3rbLx0h5vTZYCDkRj10ZQZCYpAd8WCmqaHjx+gODUPD+/BIaw2sRnSW8bTkOkYcnqdjSf+hQNcH7o7eUe8wDA0UlNYKyLnh/UtjEJXEAQWD4xVsCsS5gfx7zG6umtdhJICcg4PXRyKv3+CuoqaEskBMQ8HpI/tMyhohvjKipcooaw85/bT3+v+bPfwxhLSdOJIODQyfPp8QlZMydO9NyhZGJ8QJ1tdlystLUkZG2jt7yyvd5BWUZ2c8lxcV8vL63/c7inz5fXhDIM/+f4tylu5qLHO9mPMeoTwup1jNxLRTCRo0w+FSb507a0wWLnd81tPFXPC4lR2+pu5A2CAXIJ9k8Tl5hHFYl0Jw8l6KqZ/sw7xVzFok8vNB8u0ACHrDT0tXvGxJPizqirRX4hsTTlgtY8uk1z8Ej0bsCLnBVi7x2X9vYpeLNewhhWUXdQvPtDjtCW9p60DpUKmJg5s4Q5SokbqQVTVGz3+aHHySOWWcbIJAc/PBT59knphcxl/rEZm79A0S9JS5VpfFT2Gz1dfX0+/qff/e++XrkftW5jKu5za1d+Kv3s3OLmpraVJRnKyvP7unpIxBIGSmhwjtnCEDAieSrCdl1OaclJVhvQw4SSKrLf3S1tQzduwkt5948g0TSiei/Xlc1IgjbvQURERFtdcW9zqskxXnbBeWV+9lF4eeTYyL39/UR2jt7m1q76+qbq2ubyitqOjp6LJYZentsWMRLAB2BMKRj7FxfkSC8c4YQyuu7hx502mGzjIPaxYRHgb9d6ykdszvLZWL9uLjW0ibobd5ZpZlynDXfNXfJ67rm3Aw20VfFeN58ICkpTiYPfy4v87m8jJrKzPFX2D9AnMrjxjofDBKICnJSnHUU5KQGB4kMwtHmefKyduP246Kik5Ys1hKfOuaL1sund3FtGwCA8iyFiBM+52Kyz8Vk04VDZMrTwsqREWoKfp/pQh46NTuWLdHu6Oh5U92oOV9x/LUBAK4lZK9a+aVAqhIKEMKwy5kzjL0JY4cslpAoI7eySw5fuOsbEn/4wt1b2SXsPgZGQyCSZhh7h13J5KqJhexHJYbmO0aGqeOvqri0RsvIiYzBhfGAIIioqi1zJD8DiRkv6N8q0Bn9aIHzPtvLysa55rvmmu+KSMwlEEkjVGpLV98IlUogkiISc2lZJW8+bhpeTMiRN/A4GZ01ScWW9gcEXE3wRM7jV1qLnZmD0HjidtpTXRO3QQwbWONkPM3DZeyBEOpaHVBQkKnLOeUSeHn3oUv5xdV2602UZsqXvmmMTy1I+jP3e+tlUUfdvnL6vaur/9W9EBwOt8PGYtY0udznb0uzTs6QZ/uBIt9YmOqUP7uyyemwjJQEPnzPlMm8BZrVvWu1cfrF3flbLFFS/zCQY9c2sTnstj+qqa1XStMx6lYBS52oWwVSmo5Nbb2u+6NMthxmqSPYu4cOFUECfr2sZeR0NjKVzO1x19LW4/PTOY1F21LTnwn8TJhBEETJfNeD52/5uHv+evZWadmPkPPdU9/c9bzwdfzpnQdOp5iZGThbL2Gp5my9JOFuwcHTKT/7bFAz9X7X3KU8S0E4fYkRERzuaJDr0SBXAMDDvLL4mw8LnpaRSOTZitOkJCWoVGpP70BrS4finBkrLYyc7Fad+d0bACHG1zDQ1NT2vrmbj4INzd1NjW2A88R6urw0wOEaW7t1NOZk5RRDAFj++wgE4FVFneUO68bWboDDTZeX5uOExs8Kc70V5nr/iGm24Ph864cQAhwOcG4eCbEp/r42W3aG1+Sc6u0jyOm63rwcsNJYHa2T/bzqe7dQHw/rH+xXzFu+29/XRpzVP80IFQhhWlbRtRuZxS8rpaQk1OcryclKy8tKUUZGenoG2jt731TWS8tImi818HRbryWgGTkWlJRmFZXVOVubaGioZOaWb1plyNYFADIflWtqKdPSRa/qlJVmAcBt7IEQ3n5YKj7fIfRSOoTwzsNSU7sQSU3HSSq2kpqOpnYhtH/YOhqZLj7fgZZmiTDGnrauXnuPowvNt6dlFnLXhhBCSCSSwv5InG/gEHo6gcN/HgmKpIwXomp2Ra8/dPQMyum7swvbQhC4dR9e3sCju5cAISysaBBVs0vOfAGxRPd/u1yPWHW9oLRu0XdBr8vrdPXm2W+2VJCT6OohllTU2niELdBRPfuLM7HqusB6HTcq3jRscfrZw9U6Fh/AXRuFuPhUv52b/XZuJhLJm5wPUyjDSdFBYlOEdbtvWm0oivdfuu6nkIMu3SWR8WlFcnpuU8WmrF9jYqA5BwBQ8uZDanoBmUy58LtXzDEPAEDYlaxDv0UlR/pbr9AHAAAI4fHorOmLPbGEsPHHAGFo+mLP49FZ46+KSqV+/X3AvkOYote5MjBIXLraJ+wPfr6Bxw4VQdwORk1StXM/GNXdR2Cp09VHoOugb+vRsev5q3fWHscgghgZaopPnSyo7jNEHi4qfoMTEbl92c9YW3mctdW9a12z0e9OYqjmPMEEjtA4E3E7NT0/MyWU3R+vCYrW7oHjl9KT7z5pbGxDyxUVp29aZ+rnsWa6HNOsSqgdR4C8qqjTXOQopJf8e1mFi5d7UalCH43oFFU0iKraModSMvBphII0NndusD9YnBcpyS3olj++sTSikIZXWvs9TD0ujPrp3H5Q2t7dDwBoaO0GENzKfvGioh4AME1exvorfWb9T2M7znDZjvMndy8x0hSqlQPBUZTh4WOHtwvVCk9MxHfn4yQ4LM7CbKGw2wYAcOSgc9bDwrLyemEb4oEJedLyD5kyoqxj29nNNlhCsFy+nm7nHjIxtrDwb797Tl1IWbfWTIF5SiMcXLauflVeW1XTNDHmuPJvb560jAKbjcsnzh4Ot/Zrk4Q/eflHW2Hyb5+5ffaZ1IHgid6VWWP5b9ne/jRmbv+3/A9g97sOEosrtQAAAABJRU5ErkJggg==\"","import styled from 'styled-components';\n\nexport const Intro = styled.p`\n  margin: 0;\n`;\n\nexport const Wrapper = styled.div`\n  display: flex;\n  flex-flow: column;\n  padding: 1.5rem;\n`;\n\nexport const Image = styled.img`\n  align-self: center;\n  margin-bottom: 1.5rem;\n`;\n\nexport const List = styled.ol`\n  > li {\n    line-height: 2rem;\n  }\n`;\n","// @flow\n\nimport * as React from 'react';\n\nimport { history } from 'util/history';\nimport { Wrapper, Image, Intro, List } from './styled';\nimport Button from 'components/Buttons';\nimport imagen from 'assets/images/start.png';\n\ntype Props = {};\n\nexport const Start = (): Props => (\n  <Wrapper>\n    <Image src={imagen} />\n    <Intro>We’ll take a short video of you with your NZ passport.</Intro>\n    <List>\n      <li>For best results you’ll need to be in a quiet well lit area.</li>\n      <li>Having a flat surface to put your passport on will help.</li>\n      <li>We’ll ask you to repeat a short phrase.</li>\n    </List>\n    <Button\n      width=\"100%\"\n      onClick={() => history.push({ pathname: '/biometric-id/step1' })}\n    >\n      Start\n    </Button>\n  </Wrapper>\n);\n","import styled, { keyframes } from 'styled-components';\n\nexport const Container = styled.div`\n  visibility: ${({ mediaActivated }) =>\n    mediaActivated ? 'visible' : 'hidden'};\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: black;\n`;\n\nexport const VideoContainer = styled.div`\n  position: relative;\n  height: 100%;\n  max-height: 100%;\n`;\n\nexport const Title = styled.div`\n  position: absolute;\n  top: 0px;\n  width: 100%;\n  height: 35px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: center;\n  color: white;\n  padding: 0.7rem;\n  border-radius: 5px 5px 0 0;\n`;\n\nexport const OverlayContainer = styled.div`\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const OverlayContent = styled.div`\n  height: ${({ overlaysize: { height, width }, rotate }) =>\n    rotate === 'true' && width > height ? width : height}px;\n  width: ${({ overlaysize: { height, width }, rotate }) =>\n    rotate === 'true' && width > height ? height : width}px;\n  ${({ overlaysize: { height, width }, rotate }) =>\n    rotate === 'true' && width > height ? 'transform: rotate(-90deg);' : ''};\n  padding: 1rem;\n  transition: transform 0.5s;\n`;\n\nexport const ProgressBar = styled.progress`\n  position: absolute;\n  bottom: 52px;\n  left: 0px;\n  width: 100%;\n  height: 1px;\n  appearance: none;\n  margin: 0 0 0.7rem 0;\n\n  ::-webkit-progress-bar {\n    background-color: white;\n  }\n  ::-webkit-progress-value {\n    background-color: red;\n  }\n  ::-moz-progress-bar {\n    background-color: white;\n  }\n`;\n\nconst pulse = keyframes`\n  from {\n    background-color: darkred;\n  }\n  to {\n    background-color: lightred;\n  }\n`;\n\nexport const RecButton = styled.div`\n  position: absolute;\n  bottom: 8px;\n  left: calc(50% - 25px);\n  z-index: 100;\n  width: 50px;\n  height: 50px;\n  min-height: 50px;\n  border-radius: 50px;\n  background: rgba(100, 100, 100, .5);\n  :hover {\n    cursor: pointer;\n  }\n  :after {\n    content: '';\n    background: red;\n    width: 20px;\n    height: 20px;\n    border-radius: 50px;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    margin: auto auto;\n    ${({ recording }) =>\n      recording ? `animation: ${pulse} 0.5s infinite alternate;` : ''}\n`;\n","import styled, { keyframes } from 'styled-components';\n\nconst dash = keyframes`\n  to {\n    stroke-dashoffset: 10;\n  }\n`;\n\nexport const Overlay = styled.svg`\n  width: 100%;\n  height: 100%;\n  #passport,\n  #driverLicense {\n    animation: ${dash} 0.5s linear infinite;\n  }\n`;\n","// @flow\nimport * as React from 'react';\n\nimport { Overlay } from './styled';\n\nconst DRIVER_LICENSE_VIEW_BOX: string = '0 -5 555 860';\nconst PASSPORT_VIEW_BOX: string = '0 -5 355.56 509.21';\nconst PASSPORT_STROKE_WIDTH: string = '3';\nconst DRIVER_LICENSE_STROKE_WIDTH: string = '5';\n\ntype Props = { svgoverlay: string };\n\nclass OverlayComponent extends React.Component<Props> {\n  static defaultProps = {};\n\n  render() {\n    return (\n      <Overlay style={{ height: '100%', width: '100%' }}>\n        <symbol\n          id=\"passport\"\n          viewBox={PASSPORT_VIEW_BOX}\n          strokeDasharray=\"5\"\n          strokeDashoffset=\"0\"\n          fill=\"none\"\n          stroke=\"#fff\"\n          strokeWidth={PASSPORT_STROKE_WIDTH}\n        >\n          <rect\n            width=\"354.82\"\n            height=\"502.47\"\n            x=\".37\"\n            y=\".37\"\n            rx=\"12\"\n            ry=\"12\"\n          />\n          <path d=\"M22.27 251.61l311.39-2.34\" />\n          <path d=\"M16.31 301.85h99.27v138.17H16.31z\" />\n        </symbol>\n        <symbol\n          id=\"passportBkg\"\n          viewBox={PASSPORT_VIEW_BOX}\n          fill=\"none\"\n          stroke=\"#000\"\n          strokeWidth={PASSPORT_STROKE_WIDTH}\n        >\n          <rect\n            width=\"354.82\"\n            height=\"502.47\"\n            x=\".37\"\n            y=\".37\"\n            rx=\"12\"\n            ry=\"12\"\n          />\n          <path d=\"M22.27 251.61l311.39-2.34\" />\n          <path d=\"M16.31 301.85h99.27v138.17H16.31z\" />\n        </symbol>\n\n        <symbol\n          id=\"driverLicense\"\n          viewBox={DRIVER_LICENSE_VIEW_BOX}\n          strokeDasharray=\"5\"\n          strokeDashoffset=\"0\"\n          fill=\"none\"\n          stroke=\"#fff\"\n          strokeWidth={DRIVER_LICENSE_STROKE_WIDTH}\n        >\n          <rect x=\"2\" y=\"2\" width=\"550\" height=\"850\" rx=\"12\" ry=\"12\" />\n          <rect x=\"52\" y=\"52\" width=\"300\" height=\"230\" rx=\"12\" ry=\"12\" />\n        </symbol>\n        <symbol\n          id=\"driverLicenseBkg\"\n          viewBox={DRIVER_LICENSE_VIEW_BOX}\n          strokeDasharray=\"5\"\n          strokeDashoffset=\"0\"\n          fill=\"none\"\n          stroke=\"#000\"\n          strokeWidth={DRIVER_LICENSE_STROKE_WIDTH}\n        >\n          <rect x=\"2\" y=\"2\" width=\"550\" height=\"850\" rx=\"12\" ry=\"12\" />\n          <rect x=\"52\" y=\"52\" width=\"300\" height=\"230\" rx=\"12\" ry=\"12\" />\n        </symbol>\n\n        {this.props.svgoverlay === 'Passport' ? (\n          <React.Fragment>\n            <use xlinkHref=\"#passportBkg\" />\n            <use xlinkHref=\"#passport\" />\n          </React.Fragment>\n        ) : (\n          <React.Fragment>\n            <use xlinkHref=\"#driverLicenseBkg\" />\n            <use xlinkHref=\"#driverLicense\" />\n          </React.Fragment>\n        )}\n      </Overlay>\n    );\n  }\n}\n\nexport default OverlayComponent;\n","// @flow\n\nclass FfmpegRecorder {\n  recordEnabled: boolean;\n  frames = [];\n  interval: IntervalID;\n  video: HTMLVideoElement;\n  canvas: HTMLCanvasElement;\n  canvasCtx: CanvasRenderingContext2D;\n  imageType: string;\n  quality: number;\n  fps: number;\n\n  constructor(\n    canvas: HTMLCanvasElement,\n    video: HTMLVideoElement,\n    videoOptions: VideoOptions\n  ) {\n    this.video = video;\n    this.canvas = canvas;\n    this.canvasCtx = canvas.getContext('2d');\n    this.recordEnabled = videoOptions.recordEnabled || false;\n    this.imageType = `image/${videoOptions.imageType}` || 'image/jpeg';\n    this.quality = videoOptions.quality || 0.5;\n    this.fps = videoOptions.fps || 24;\n  }\n\n  // Mimicking MediaRecorder API\n  ondataavailable: any => any = () => {};\n  start = () => this.captureFrames();\n  onstop = () => {};\n  stop = () => {\n    clearInterval(this.interval);\n    this.ondataavailable({ data: this.frames });\n    this.onstop();\n  };\n  onerror = () => {\n    log('FfmpegRecorder error');\n  };\n\n  captureFrames = () => {\n    this.interval = setInterval(() => {\n      // TODO: any faster way to do it?\n      if (this.recordEnabled) {\n        this.canvasCtx.drawImage(\n          this.video,\n          0,\n          0,\n          this.canvas.width,\n          this.canvas.height\n        );\n        this.frames.push(this.canvas.toDataURL(this.imageType, this.quality));\n      }\n    }, 1000 / this.fps);\n  };\n}\n\nfunction recorder(\n  video: HTMLVideoElement,\n  canvas: HTMLCanvasElement,\n  videoOptions: VideoOptions\n) {\n  if (window.MediaRecorder && videoOptions.useMediaRecorderApi) {\n    return new MediaRecorder(video.srcObject);\n  }\n  return new FfmpegRecorder(canvas, video, videoOptions);\n}\n\nexport default recorder;\n","/* eslint-disable */\n\nconst headtrackr = function() {\n  var headtrackr = {};\n  headtrackr.rev = 2;\n\n  /**\n   * @constructor\n   */\n  headtrackr.Tracker = function(params) {\n    if (!params) params = {};\n    params.faceDetection = params.faceDetection || true;\n    if (params.smoothing === undefined) params.smoothing = true;\n    if (params.retryDetection === undefined) params.retryDetection = true;\n    if (params.ui === undefined) params.ui = false;\n    if (params.debug === undefined) {\n      params.debug = false;\n    } else {\n      if (params.debug.tagName != 'CANVAS') {\n        params.debug = false;\n      } else {\n        var debugContext = params.debug.getContext('2d');\n      }\n    }\n    if (params.detectionInterval === undefined) params.detectionInterval = 20;\n    if (params.fadeVideo === undefined) params.fadeVideo = false;\n    if (params.cameraOffset === undefined) params.cameraOffset = 11.5;\n    if (params.calcAngles === undefined) params.calcAngles = false;\n    if (params.headPosition === undefined) params.headPosition = true;\n\n    var ui, smoother, facetracker, headposition, canvasElement;\n    var canvasContext, videoElement, detector;\n    var detectionTimer;\n    var fov = 0;\n    var initialized = true;\n    var run = false;\n    var faceFound = false;\n    var firstRun = true;\n    var videoFaded = false;\n    var headDiagonal = [];\n\n    this.status = '';\n    this.stream = undefined;\n\n    var statusEvent = document.createEvent('Event');\n    statusEvent.initEvent('headtrackrStatus', true, true);\n\n    var headtrackerStatus = function(message) {\n      statusEvent.status = message;\n      document.dispatchEvent(statusEvent);\n      this.status = message;\n    }.bind(this);\n\n    this.init = function(video, canvas) {\n      videoElement = video;\n      canvasElement = canvas;\n      canvasContext = canvas.getContext('2d');\n      if (params.ui) {\n        ui = new headtrackr.Ui();\n      }\n      smoother = new headtrackr.Smoother(0.35, params.detectionInterval + 15);\n      this.initialized = true;\n    };\n\n    var track = function() {\n      // Copy video to canvas\n      canvasContext.drawImage(\n        videoElement,\n        0,\n        0,\n        canvasElement.width,\n        canvasElement.height\n      );\n      if (params.faceDetection) {\n        // if facetracking hasn't started, initialize facetrackr\n        if (facetracker === undefined) {\n          facetracker = new headtrackr.facetrackr.Tracker({\n            debug: params.debug,\n            calcAngles: params.calcAngles,\n          });\n          facetracker.init(canvasElement);\n        }\n\n        // track face\n        facetracker.track();\n        var faceObj = facetracker.getTrackingObject({ debug: params.debug });\n\n        if (faceObj.detection == 'WB') headtrackerStatus('whitebalance');\n        if (firstRun && faceObj.detection == 'VJ')\n          headtrackerStatus('detecting');\n\n        // check if we have a detection first\n        if (!(faceObj.confidence == 0)) {\n          if (faceObj.detection == 'VJ') {\n            if (detectionTimer === undefined) {\n              // start timing\n              detectionTimer = new Date().getTime();\n            }\n            if (new Date().getTime() - detectionTimer > 5000) {\n              headtrackerStatus('hints');\n            }\n\n            var x = faceObj.x + faceObj.width / 2; //midpoint\n            var y = faceObj.y + faceObj.height / 2; //midpoint\n\n            if (params.debug) {\n              // draw detected face on debuggercanvas\n              debugContext.strokeStyle = '#0000CC';\n              debugContext.strokeRect(\n                faceObj.x,\n                faceObj.y,\n                faceObj.width,\n                faceObj.height\n              );\n            }\n          }\n          if (faceObj.detection == 'CS') {\n            var x = faceObj.x; //midpoint\n            var y = faceObj.y; //midpoint\n\n            if (detectionTimer !== undefined) detectionTimer = undefined;\n\n            if (params.debug) {\n              // draw tracked face on debuggercanvas\n              debugContext.translate(faceObj.x, faceObj.y);\n              debugContext.rotate(faceObj.angle - Math.PI / 2);\n              debugContext.strokeStyle = '#00CC00';\n              debugContext.strokeRect(\n                -(faceObj.width / 2) >> 0,\n                -(faceObj.height / 2) >> 0,\n                faceObj.width,\n                faceObj.height\n              );\n              debugContext.rotate(Math.PI / 2 - faceObj.angle);\n              debugContext.translate(-faceObj.x, -faceObj.y);\n            }\n\n            // fade out video if it's showing\n            if (!videoFaded && params.fadeVideo) {\n              fadeVideo();\n              videoFaded = true;\n            }\n\n            this.status = 'tracking';\n\n            //check if we've lost tracking of face\n            if (faceObj.width == 0 || faceObj.height == 0) {\n              if (params.retryDetection) {\n                // retry facedetection\n                headtrackerStatus('redetecting');\n\n                facetracker = new headtrackr.facetrackr.Tracker({\n                  whitebalancing: false,\n                  debug: params.debug,\n                  calcAngles: params.calcAngles,\n                });\n                facetracker.init(canvasElement);\n                faceFound = false;\n                headposition = undefined;\n\n                // show video again if it's not already showing\n                if (videoFaded) {\n                  videoElement.style.opacity = 1;\n                  videoFaded = false;\n                }\n              } else {\n                headtrackerStatus('lost');\n                this.stop();\n              }\n            } else {\n              if (!faceFound) {\n                headtrackerStatus('found');\n                faceFound = true;\n              }\n\n              if (params.smoothing) {\n                // smooth values\n                if (!smoother.initialized) {\n                  smoother.init(faceObj);\n                }\n                faceObj = smoother.smooth(faceObj);\n              }\n\n              // get headposition\n              if (headposition === undefined && params.headPosition) {\n                // wait until headdiagonal is stable before initializing headposition\n                var stable = false;\n\n                // calculate headdiagonal\n                var headdiag = Math.sqrt(\n                  faceObj.width * faceObj.width +\n                    faceObj.height * faceObj.height\n                );\n\n                if (headDiagonal.length < 6) {\n                  headDiagonal.push(headdiag);\n                } else {\n                  headDiagonal.splice(0, 1);\n                  headDiagonal.push(headdiag);\n                  if (\n                    Math.max.apply(null, headDiagonal) -\n                      Math.min.apply(null, headDiagonal) <\n                    5\n                  ) {\n                    stable = true;\n                  }\n                }\n\n                if (stable) {\n                  if (firstRun) {\n                    if (params.fov === undefined) {\n                      headposition = new headtrackr.headposition.Tracker(\n                        faceObj,\n                        canvasElement.width,\n                        canvasElement.height,\n                        { distance_from_camera_to_screen: params.cameraOffset }\n                      );\n                    } else {\n                      headposition = new headtrackr.headposition.Tracker(\n                        faceObj,\n                        canvasElement.width,\n                        canvasElement.height,\n                        {\n                          fov: params.fov,\n                          distance_from_camera_to_screen: params.cameraOffset,\n                        }\n                      );\n                    }\n                    fov = headposition.getFOV();\n                    firstRun = false;\n                  } else {\n                    headposition = new headtrackr.headposition.Tracker(\n                      faceObj,\n                      canvasElement.width,\n                      canvasElement.height,\n                      {\n                        fov: fov,\n                        distance_from_camera_to_screen: params.cameraOffset,\n                      }\n                    );\n                  }\n                  headposition.track(faceObj);\n                }\n              } else if (params.headPosition) {\n                headposition.track(faceObj);\n              }\n            }\n          }\n        }\n      }\n\n      if (run) {\n        detector = window.setTimeout(track, params.detectionInterval);\n      }\n    }.bind(this);\n\n    var starter = function() {\n      // does some safety checks before starting\n      // sometimes canvasContext is not available yet, so try and catch if it's not there...\n      try {\n        canvasContext.drawImage(\n          videoElement,\n          0,\n          0,\n          canvasElement.width,\n          canvasElement.height\n        );\n        // in some cases, the video sends events before starting to draw\n        // so check that we have something on video before starting to track\n        var canvasContent = headtrackr.getWhitebalance(canvasElement);\n        if (canvasContent > 0) {\n          run = true;\n          track();\n        } else {\n          window.setTimeout(starter, 100);\n        }\n      } catch (err) {\n        window.setTimeout(starter, 100);\n      }\n    };\n\n    this.start = function() {\n      // check if initialized\n      if (!this.initialized) return false;\n      // check if video is playing, if not, return false\n      if (\n        !(\n          videoElement.currentTime > 0 &&\n          !videoElement.paused &&\n          !videoElement.ended\n        )\n      ) {\n        run = true;\n        //set event\n        videoElement.addEventListener('playing', starter, false);\n\n        return true;\n      } else {\n        starter();\n      }\n\n      return true;\n    };\n\n    this.stop = function() {\n      window.clearTimeout(detector);\n      run = false;\n      headtrackerStatus('stopped');\n      facetracker = undefined;\n      faceFound = false;\n\n      return true;\n    };\n\n    this.stopStream = function() {\n      if (this.stream !== undefined) {\n        // Support for pre-standardisation browsers\n        if (this.stream.stop !== undefined) {\n          this.stream.stop();\n        } else if (this.stream.getVideoTracks !== undefined) {\n          // Standards-compliant (per-stream)\n          this.stream.getVideoTracks().forEach(function(t) {\n            t.stop();\n          });\n        }\n      }\n    };\n\n    this.getFOV = function() {\n      return fov;\n    };\n\n    // fade out videoElement\n    var fadeVideo = function() {\n      if (videoElement.style.opacity == '') {\n        videoElement.style.opacity = 0.98;\n        window.setTimeout(fadeVideo, 50);\n      } else if (videoElement.style.opacity > 0.3) {\n        videoElement.style.opacity -= 0.02;\n        window.setTimeout(fadeVideo, 50);\n      } else {\n        videoElement.style.opacity = 0.3;\n      }\n    };\n  };\n\n  // bind shim\n  // from https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind\n\n  if (!Function.prototype.bind) {\n    Function.prototype.bind = function(oThis) {\n      if (typeof this !== 'function') {\n        // closest thing possible to the ECMAScript 5 internal IsCallable function\n        throw new TypeError(\n          'Function.prototype.bind - what is trying to be bound is not callable'\n        );\n      }\n\n      var aArgs = Array.prototype.slice.call(arguments, 1),\n        fToBind = this,\n        fNOP = function() {},\n        fBound = function() {\n          return fToBind.apply(\n            this instanceof fNOP ? this : oThis || window,\n            aArgs.concat(Array.prototype.slice.call(arguments))\n          );\n        };\n\n      fNOP.prototype = this.prototype;\n      fBound.prototype = new fNOP();\n\n      return fBound;\n    };\n  }\n\n  // video support utility functions\n\n  function supports_video() {\n    return !!document.createElement('video').canPlayType;\n  }\n\n  function supports_h264_baseline_video() {\n    if (!supports_video()) {\n      return false;\n    }\n    var v = document.createElement('video');\n    return v.canPlayType('video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"');\n  }\n\n  function supports_ogg_theora_video() {\n    if (!supports_video()) {\n      return false;\n    }\n    var v = document.createElement('video');\n    return v.canPlayType('video/ogg; codecs=\"theora, vorbis\"');\n  }\n\n  function supports_webm_video() {\n    if (!supports_video()) {\n      return false;\n    }\n    var v = document.createElement('video');\n    return v.canPlayType('video/webm; codecs=\"vp8, vorbis\"');\n  }\n\n  /**\n   * Viola-Jones-like face detection algorithm\n   * Some explanation here: http://liuliu.me/eyes/javascript-face-detection-explained/\n   *\n   * @author Liu Liu / github.com/liuliu\n   *\n   * Copyright (c) 2010, Liu Liu\n   * All rights reserved.\n   *\n   * Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n   *\n   * * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n   * * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n   * * Neither the name of the authors nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n   *\n   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n   *\n   */\n\n  headtrackr.ccv = {};\n\n  headtrackr.ccv.grayscale = function(canvas) {\n    /* detect_objects requires gray-scale image */\n    var ctx = canvas.getContext('2d');\n    var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    var data = imageData.data;\n    var pix1,\n      pix2,\n      pix = canvas.width * canvas.height * 4;\n    while (pix > 0)\n      data[(pix -= 4)] = data[(pix1 = pix + 1)] = data[(pix2 = pix + 2)] =\n        data[pix] * 0.3 + data[pix1] * 0.59 + data[pix2] * 0.11;\n    ctx.putImageData(imageData, 0, 0);\n    return canvas;\n  };\n\n  headtrackr.ccv.array_group = function(seq, gfunc) {\n    var i, j;\n    var node = new Array(seq.length);\n    for (i = 0; i < seq.length; i++)\n      node[i] = {\n        parent: -1,\n        element: seq[i],\n        rank: 0,\n      };\n    for (i = 0; i < seq.length; i++) {\n      if (!node[i].element) continue;\n      var root = i;\n      while (node[root].parent != -1) root = node[root].parent;\n      for (j = 0; j < seq.length; j++) {\n        if (\n          i != j &&\n          node[j].element &&\n          gfunc(node[i].element, node[j].element)\n        ) {\n          var root2 = j;\n\n          while (node[root2].parent != -1) root2 = node[root2].parent;\n\n          if (root2 != root) {\n            if (node[root].rank > node[root2].rank) node[root2].parent = root;\n            else {\n              node[root].parent = root2;\n              if (node[root].rank == node[root2].rank) node[root2].rank++;\n              root = root2;\n            }\n\n            /* compress path from node2 to the root: */\n            var temp,\n              node2 = j;\n            while (node[node2].parent != -1) {\n              temp = node2;\n              node2 = node[node2].parent;\n              node[temp].parent = root;\n            }\n\n            /* compress path from node to the root: */\n            node2 = i;\n            while (node[node2].parent != -1) {\n              temp = node2;\n              node2 = node[node2].parent;\n              node[temp].parent = root;\n            }\n          }\n        }\n      }\n    }\n    var idx = new Array(seq.length);\n    var class_idx = 0;\n    for (i = 0; i < seq.length; i++) {\n      j = -1;\n      var node1 = i;\n      if (node[node1].element) {\n        while (node[node1].parent != -1) node1 = node[node1].parent;\n        if (node[node1].rank >= 0) node[node1].rank = ~class_idx++;\n        j = ~node[node1].rank;\n      }\n      idx[i] = j;\n    }\n    return { index: idx, cat: class_idx };\n  };\n\n  headtrackr.ccv.detect_objects = function(\n    canvas,\n    cascade,\n    interval,\n    min_neighbors\n  ) {\n    var scale = Math.pow(2, 1 / (interval + 1));\n    var next = interval + 1;\n    var scale_upto = Math.floor(\n      Math.log(Math.min(cascade.width, cascade.height)) / Math.log(scale)\n    );\n    var pyr = new Array((scale_upto + next * 2) * 4);\n    pyr[0] = canvas;\n    pyr[0].data = pyr[0]\n      .getContext('2d')\n      .getImageData(0, 0, pyr[0].width, pyr[0].height).data;\n    var i, j, k, x, y, q;\n    for (i = 1; i <= interval; i++) {\n      pyr[i * 4] = document.createElement('canvas');\n      pyr[i * 4].width = Math.floor(pyr[0].width / Math.pow(scale, i));\n      pyr[i * 4].height = Math.floor(pyr[0].height / Math.pow(scale, i));\n      pyr[i * 4]\n        .getContext('2d')\n        .drawImage(\n          pyr[0],\n          0,\n          0,\n          pyr[0].width,\n          pyr[0].height,\n          0,\n          0,\n          pyr[i * 4].width,\n          pyr[i * 4].height\n        );\n      pyr[i * 4].data = pyr[i * 4]\n        .getContext('2d')\n        .getImageData(0, 0, pyr[i * 4].width, pyr[i * 4].height).data;\n    }\n    for (i = next; i < scale_upto + next * 2; i++) {\n      pyr[i * 4] = document.createElement('canvas');\n      pyr[i * 4].width = Math.floor(pyr[i * 4 - next * 4].width / 2);\n      pyr[i * 4].height = Math.floor(pyr[i * 4 - next * 4].height / 2);\n      pyr[i * 4]\n        .getContext('2d')\n        .drawImage(\n          pyr[i * 4 - next * 4],\n          0,\n          0,\n          pyr[i * 4 - next * 4].width,\n          pyr[i * 4 - next * 4].height,\n          0,\n          0,\n          pyr[i * 4].width,\n          pyr[i * 4].height\n        );\n      pyr[i * 4].data = pyr[i * 4]\n        .getContext('2d')\n        .getImageData(0, 0, pyr[i * 4].width, pyr[i * 4].height).data;\n    }\n    for (i = next * 2; i < scale_upto + next * 2; i++) {\n      pyr[i * 4 + 1] = document.createElement('canvas');\n      pyr[i * 4 + 1].width = Math.floor(pyr[i * 4 - next * 4].width / 2);\n      pyr[i * 4 + 1].height = Math.floor(pyr[i * 4 - next * 4].height / 2);\n      pyr[i * 4 + 1]\n        .getContext('2d')\n        .drawImage(\n          pyr[i * 4 - next * 4],\n          1,\n          0,\n          pyr[i * 4 - next * 4].width - 1,\n          pyr[i * 4 - next * 4].height,\n          0,\n          0,\n          pyr[i * 4 + 1].width - 2,\n          pyr[i * 4 + 1].height\n        );\n      pyr[i * 4 + 1].data = pyr[i * 4 + 1]\n        .getContext('2d')\n        .getImageData(0, 0, pyr[i * 4 + 1].width, pyr[i * 4 + 1].height).data;\n      pyr[i * 4 + 2] = document.createElement('canvas');\n      pyr[i * 4 + 2].width = Math.floor(pyr[i * 4 - next * 4].width / 2);\n      pyr[i * 4 + 2].height = Math.floor(pyr[i * 4 - next * 4].height / 2);\n      pyr[i * 4 + 2]\n        .getContext('2d')\n        .drawImage(\n          pyr[i * 4 - next * 4],\n          0,\n          1,\n          pyr[i * 4 - next * 4].width,\n          pyr[i * 4 - next * 4].height - 1,\n          0,\n          0,\n          pyr[i * 4 + 2].width,\n          pyr[i * 4 + 2].height - 2\n        );\n      pyr[i * 4 + 2].data = pyr[i * 4 + 2]\n        .getContext('2d')\n        .getImageData(0, 0, pyr[i * 4 + 2].width, pyr[i * 4 + 2].height).data;\n      pyr[i * 4 + 3] = document.createElement('canvas');\n      pyr[i * 4 + 3].width = Math.floor(pyr[i * 4 - next * 4].width / 2);\n      pyr[i * 4 + 3].height = Math.floor(pyr[i * 4 - next * 4].height / 2);\n      pyr[i * 4 + 3]\n        .getContext('2d')\n        .drawImage(\n          pyr[i * 4 - next * 4],\n          1,\n          1,\n          pyr[i * 4 - next * 4].width - 1,\n          pyr[i * 4 - next * 4].height - 1,\n          0,\n          0,\n          pyr[i * 4 + 3].width - 2,\n          pyr[i * 4 + 3].height - 2\n        );\n      pyr[i * 4 + 3].data = pyr[i * 4 + 3]\n        .getContext('2d')\n        .getImageData(0, 0, pyr[i * 4 + 3].width, pyr[i * 4 + 3].height).data;\n    }\n    for (j = 0; j < cascade.stage_classifier.length; j++)\n      cascade.stage_classifier[j].orig_feature =\n        cascade.stage_classifier[j].feature;\n    var scale_x = 1,\n      scale_y = 1;\n    var dx = [0, 1, 0, 1];\n    var dy = [0, 0, 1, 1];\n    var seq = [];\n    for (i = 0; i < scale_upto; i++) {\n      var qw = pyr[i * 4 + next * 8].width - Math.floor(cascade.width / 4);\n      var qh = pyr[i * 4 + next * 8].height - Math.floor(cascade.height / 4);\n      var step = [\n        pyr[i * 4].width * 4,\n        pyr[i * 4 + next * 4].width * 4,\n        pyr[i * 4 + next * 8].width * 4,\n      ];\n      var paddings = [\n        pyr[i * 4].width * 16 - qw * 16,\n        pyr[i * 4 + next * 4].width * 8 - qw * 8,\n        pyr[i * 4 + next * 8].width * 4 - qw * 4,\n      ];\n      for (j = 0; j < cascade.stage_classifier.length; j++) {\n        var orig_feature = cascade.stage_classifier[j].orig_feature;\n        var feature = (cascade.stage_classifier[j].feature = new Array(\n          cascade.stage_classifier[j].count\n        ));\n        for (k = 0; k < cascade.stage_classifier[j].count; k++) {\n          feature[k] = {\n            size: orig_feature[k].size,\n            px: new Array(orig_feature[k].size),\n            pz: new Array(orig_feature[k].size),\n            nx: new Array(orig_feature[k].size),\n            nz: new Array(orig_feature[k].size),\n          };\n          for (q = 0; q < orig_feature[k].size; q++) {\n            feature[k].px[q] =\n              orig_feature[k].px[q] * 4 +\n              orig_feature[k].py[q] * step[orig_feature[k].pz[q]];\n            feature[k].pz[q] = orig_feature[k].pz[q];\n            feature[k].nx[q] =\n              orig_feature[k].nx[q] * 4 +\n              orig_feature[k].ny[q] * step[orig_feature[k].nz[q]];\n            feature[k].nz[q] = orig_feature[k].nz[q];\n          }\n        }\n      }\n      for (q = 0; q < 4; q++) {\n        var u8 = [\n          pyr[i * 4].data,\n          pyr[i * 4 + next * 4].data,\n          pyr[i * 4 + next * 8 + q].data,\n        ];\n        var u8o = [\n          dx[q] * 8 + dy[q] * pyr[i * 4].width * 8,\n          dx[q] * 4 + dy[q] * pyr[i * 4 + next * 4].width * 4,\n          0,\n        ];\n        for (y = 0; y < qh; y++) {\n          for (x = 0; x < qw; x++) {\n            var sum = 0;\n            var flag = true;\n            for (j = 0; j < cascade.stage_classifier.length; j++) {\n              sum = 0;\n              var alpha = cascade.stage_classifier[j].alpha;\n              var feature = cascade.stage_classifier[j].feature;\n              for (k = 0; k < cascade.stage_classifier[j].count; k++) {\n                var feature_k = feature[k];\n                var p,\n                  pmin =\n                    u8[feature_k.pz[0]][u8o[feature_k.pz[0]] + feature_k.px[0]];\n                var n,\n                  nmax =\n                    u8[feature_k.nz[0]][u8o[feature_k.nz[0]] + feature_k.nx[0]];\n                if (pmin <= nmax) {\n                  sum += alpha[k * 2];\n                } else {\n                  var f,\n                    shortcut = true;\n                  for (f = 0; f < feature_k.size; f++) {\n                    if (feature_k.pz[f] >= 0) {\n                      p =\n                        u8[feature_k.pz[f]][\n                          u8o[feature_k.pz[f]] + feature_k.px[f]\n                        ];\n                      if (p < pmin) {\n                        if (p <= nmax) {\n                          shortcut = false;\n                          break;\n                        }\n                        pmin = p;\n                      }\n                    }\n                    if (feature_k.nz[f] >= 0) {\n                      n =\n                        u8[feature_k.nz[f]][\n                          u8o[feature_k.nz[f]] + feature_k.nx[f]\n                        ];\n                      if (n > nmax) {\n                        if (pmin <= n) {\n                          shortcut = false;\n                          break;\n                        }\n                        nmax = n;\n                      }\n                    }\n                  }\n                  sum += shortcut ? alpha[k * 2 + 1] : alpha[k * 2];\n                }\n              }\n              if (sum < cascade.stage_classifier[j].threshold) {\n                flag = false;\n                break;\n              }\n            }\n            if (flag) {\n              seq.push({\n                x: (x * 4 + dx[q] * 2) * scale_x,\n                y: (y * 4 + dy[q] * 2) * scale_y,\n                width: cascade.width * scale_x,\n                height: cascade.height * scale_y,\n                neighbor: 1,\n                confidence: sum,\n              });\n            }\n            u8o[0] += 16;\n            u8o[1] += 8;\n            u8o[2] += 4;\n          }\n          u8o[0] += paddings[0];\n          u8o[1] += paddings[1];\n          u8o[2] += paddings[2];\n        }\n      }\n      scale_x *= scale;\n      scale_y *= scale;\n    }\n    for (j = 0; j < cascade.stage_classifier.length; j++)\n      cascade.stage_classifier[j].feature =\n        cascade.stage_classifier[j].orig_feature;\n    if (!(min_neighbors > 0)) return seq;\n    else {\n      var result = headtrackr.ccv.array_group(seq, function(r1, r2) {\n        var distance = Math.floor(r1.width * 0.25 + 0.5);\n\n        return (\n          r2.x <= r1.x + distance &&\n          r2.x >= r1.x - distance &&\n          r2.y <= r1.y + distance &&\n          r2.y >= r1.y - distance &&\n          r2.width <= Math.floor(r1.width * 1.5 + 0.5) &&\n          Math.floor(r2.width * 1.5 + 0.5) >= r1.width\n        );\n      });\n      var ncomp = result.cat;\n      var idx_seq = result.index;\n      var comps = new Array(ncomp + 1);\n      for (i = 0; i < comps.length; i++)\n        comps[i] = {\n          neighbors: 0,\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0,\n          confidence: 0,\n        };\n\n      // count number of neighbors\n      for (i = 0; i < seq.length; i++) {\n        var r1 = seq[i];\n        var idx = idx_seq[i];\n\n        if (comps[idx].neighbors == 0) comps[idx].confidence = r1.confidence;\n\n        ++comps[idx].neighbors;\n\n        comps[idx].x += r1.x;\n        comps[idx].y += r1.y;\n        comps[idx].width += r1.width;\n        comps[idx].height += r1.height;\n        comps[idx].confidence = Math.max(comps[idx].confidence, r1.confidence);\n      }\n\n      var seq2 = [];\n      // calculate average bounding box\n      for (i = 0; i < ncomp; i++) {\n        var n = comps[i].neighbors;\n        if (n >= min_neighbors)\n          seq2.push({\n            x: (comps[i].x * 2 + n) / (2 * n),\n            y: (comps[i].y * 2 + n) / (2 * n),\n            width: (comps[i].width * 2 + n) / (2 * n),\n            height: (comps[i].height * 2 + n) / (2 * n),\n            neighbors: comps[i].neighbors,\n            confidence: comps[i].confidence,\n          });\n      }\n\n      var result_seq = [];\n      // filter out small face rectangles inside large face rectangles\n      for (i = 0; i < seq2.length; i++) {\n        var r1 = seq2[i];\n        var flag = true;\n        for (j = 0; j < seq2.length; j++) {\n          var r2 = seq2[j];\n          var distance = Math.floor(r2.width * 0.25 + 0.5);\n\n          if (\n            i != j &&\n            r1.x >= r2.x - distance &&\n            r1.y >= r2.y - distance &&\n            r1.x + r1.width <= r2.x + r2.width + distance &&\n            r1.y + r1.height <= r2.y + r2.height + distance &&\n            (r2.neighbors > Math.max(3, r1.neighbors) || r1.neighbors < 3)\n          ) {\n            flag = false;\n            break;\n          }\n        }\n\n        if (flag) result_seq.push(r1);\n      }\n      return result_seq;\n    }\n  };\n\n  /**\n   * @author auduno / github.com/auduno\n   */\n\n  headtrackr.getWhitebalance = function(canvas) {\n    // returns average gray value in canvas\n\n    var avggray, avgr, avgb, avgg;\n\n    var canvasContext = canvas.getContext('2d');\n    var image = canvasContext.getImageData(0, 0, canvas.width, canvas.height);\n    var id = image.data;\n    var imagesize = image.width * image.height;\n    var r = 0;\n    var g = 0;\n    var b = 0;\n\n    for (var i = 0; i < imagesize; i++) {\n      r += id[4 * i];\n      g += id[4 * i + 1];\n      b += id[4 * i + 2];\n    }\n    avgr = r / imagesize;\n    avgg = g / imagesize;\n    avgb = b / imagesize;\n    avggray = (avgr + avgg + avgb) / 3;\n\n    return avggray;\n  };\n  /**\n   * Smoother for smoothing tracked positions of face\n   *\n   * Double Exponential Smoothing-based Prediction\n   *\t see: http://www.cs.brown.edu/people/jjl/pubs/kfvsexp_final_laviola.pdf\n   *\t \"Double Exponential Smoothing: An alternative to Kalman Filter-based Predictive Tracking\"\n   *\n   * @author auduno / github.com/auduno\n   * @param {number} a Smoothing parameter, between 0 and 1. 0 is max smoothing, 1 no smoothing.\n   * @param {number} interval The ms interval between tracking events\n   * @constructor\n   */\n  headtrackr.Smoother = function(alpha, interval) {\n    // alpha = 0.35 smoothes ok while not introducing too much lag\n\n    var sp, sp2, sl, newPositions, positions;\n    var updateTime = new Date();\n\n    this.initialized = false;\n\n    this.init = function(initPos) {\n      this.initialized = true;\n      sp = [initPos.x, initPos.y, initPos.z, initPos.width, initPos.height];\n      sp2 = sp;\n      sl = sp.length;\n    };\n\n    this.smooth = function(pos) {\n      positions = [pos.x, pos.y, pos.z, pos.width, pos.height];\n      if (this.initialized) {\n        // update\n        for (var i = 0; i < sl; i++) {\n          sp[i] = alpha * positions[i] + (1 - alpha) * sp[i];\n          sp2[i] = alpha * sp[i] + (1 - alpha) * sp2[i];\n        }\n      }\n      return false;\n    };\n  };\n  /**\n   * camshift object tracker\n   *\n   * ported with some optimizations from actionscript3 library FaceIt:\n   *\t http://www.mukimuki.fr/flashblog/2009/06/18/camshift-going-to-the-source/\n   *\t http://www.libspark.org/browser/as3/FaceIt\n   * some explanation of algorithm here :\n   *\t http://www.cognotics.com/opencv/servo_2007_series/part_3/sidebar.html\n   *\n   * usage:\n   *\t // create a new tracker\n   *\t var cstracker = new headtrackr.camshift.Tracker();\n   *\t // initialize it with a canvas, and a rectangle around the object on the canvas we'd like to track\n   *\t cstracker.initTracker(some_canvas, new headtrackr.camshift.Rectangle(x,y,w,h));\n   *\t // find object in same or some other canvas\n   *\t cstracker.track(some_canvas);\n   *\t // get position of found object\n   *\t var currentPos = cstracker.getTrackObj();\n   *\t currentPos.x // x-coordinate of center of object on canvas\n   *\t currentPos.y // y-coordinate of center of object on canvas\n   *\t currentPos.width // width of object\n   *\t currentPos.height // heigh of object\n   *\t currentPos.angle // angle of object in radians\n   *\n   * @author Benjamin Jung / jungbenj@gmail.com\n   * @author auduno / github.com/auduno\n   *\n   * License of original actionscript code:\n   *\n   * Copyright (C)2009 Benjamin Jung\n   *\n   * Licensed under the MIT License\n   *\n   * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n   *\n   * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n   *\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n   *\n   */\n\n  headtrackr.camshift = {};\n\n  /**\n   * RGB histogram\n   *\n   * @constructor\n   */\n  headtrackr.camshift.Histogram = function(imgdata) {\n    this.size = 4096;\n\n    var bins = [];\n    var i, x, r, g, b, il;\n\n    //initialize bins\n    for (i = 0; i < this.size; i++) {\n      bins.push(0);\n    }\n\n    //add histogram data\n    for (x = 0, il = imgdata.length; x < il; x += 4) {\n      r = imgdata[x + 0] >> 4; // round down to bins of 16\n      g = imgdata[x + 1] >> 4;\n      b = imgdata[x + 2] >> 4;\n      bins[256 * r + 16 * g + b] += 1;\n    }\n\n    this.getBin = function(index) {\n      return bins[index];\n    };\n  };\n\n  /**\n   * moments object\n   *\n   * @constructor\n   */\n  headtrackr.camshift.Moments = function(data, x, y, w, h, second) {\n    this.m00 = 0;\n    this.m01 = 0;\n    this.m10 = 0;\n    this.m11 = 0;\n    this.m02 = 0;\n    this.m20 = 0;\n\n    var i, j, val, vx, vy;\n    var a = [];\n    for (i = x; i < w; i++) {\n      a = data[i];\n      vx = i - x;\n\n      for (j = y; j < h; j++) {\n        val = a[j];\n\n        vy = j - y;\n        this.m00 += val;\n        this.m01 += vy * val;\n        this.m10 += vx * val;\n        if (second) {\n          this.m11 += vx * vy * val;\n          this.m02 += vy * vy * val;\n          this.m20 += vx * vx * val;\n        }\n      }\n    }\n\n    this.invM00 = 1 / this.m00;\n    this.xc = this.m10 * this.invM00;\n    this.yc = this.m01 * this.invM00;\n    this.mu00 = this.m00;\n    this.mu01 = 0;\n    this.mu10 = 0;\n    if (second) {\n      this.mu20 = this.m20 - this.m10 * this.xc;\n      this.mu02 = this.m02 - this.m01 * this.yc;\n      this.mu11 = this.m11 - this.m01 * this.xc;\n    }\n  };\n\n  /**\n   * rectangle object\n   *\n   * @constructor\n   */\n  headtrackr.camshift.Rectangle = function(x, y, w, h) {\n    this.x = x;\n    this.y = y;\n    this.width = w;\n    this.height = h;\n\n    this.clone = function() {\n      var c = new headtrackr.camshift.Rectangle();\n      c.height = this.height;\n      c.width = this.width;\n      c.x = this.x;\n      c.y = this.y;\n      return c;\n    };\n  };\n\n  /**\n   * Tracker object\n   *\n   * @constructor\n   */\n  headtrackr.camshift.Tracker = function(params) {\n    if (params === undefined) params = {};\n    if (params.calcAngles === undefined) params.calcAngles = true;\n\n    var _modelHist,\n      _curHist, //current histogram\n      _pdf, // pixel probability data for current searchwindow\n      _searchWindow, // rectangle where we are searching\n      _trackObj, // object holding data about where current tracked object is\n      _canvasCtx, // canvas context for initial canvas\n      _canvasw, // canvas width for tracking canvas\n      _canvash; // canvas height for tracking canvas\n\n    this.getSearchWindow = function() {\n      // return the search window used by the camshift algorithm in the current analysed image\n      return _searchWindow.clone();\n    };\n\n    this.getTrackObj = function() {\n      // return a trackobj with the size and orientation of the tracked object in the current analysed image\n      return _trackObj.clone();\n    };\n\n    this.getPdf = function() {\n      // returns a nested array representing color\n      return _pdf;\n    };\n\n    this.getBackProjectionImg = function() {\n      // return imgData representing pixel color probabilities, which can then be put into canvas\n      var weights = _pdf;\n      var w = _canvasw;\n      var h = _canvash;\n      var img = _canvasCtx.createImageData(w, h);\n      var imgData = img.data;\n      var x, y, val;\n      for (x = 0; x < w; x++) {\n        for (y = 0; y < h; y++) {\n          val = Math.floor(255 * weights[x][y]);\n          pos = (y * w + x) * 4;\n          imgData[pos] = val;\n          imgData[pos + 1] = val;\n          imgData[pos + 2] = val;\n          imgData[pos + 3] = 255;\n        }\n      }\n      return img;\n    };\n\n    this.initTracker = function(canvas, trackedArea) {\n      // initialize the tracker with canvas and the area of interest as a rectangle\n\n      _canvasCtx = canvas.getContext('2d');\n      var taw = trackedArea.width;\n      var tah = trackedArea.height;\n      var tax = trackedArea.x;\n      var tay = trackedArea.y;\n      var trackedImg = _canvasCtx.getImageData(tax, tay, taw, tah);\n\n      _modelHist = new headtrackr.camshift.Histogram(trackedImg.data);\n      _searchWindow = trackedArea.clone();\n      _trackObj = new headtrackr.camshift.TrackObj();\n    };\n\n    this.track = function(canvas) {\n      // search the tracked object by camshift\n      var canvasCtx = canvas.getContext('2d');\n      _canvash = canvas.height;\n      _canvasw = canvas.width;\n      var imgData = canvasCtx.getImageData(0, 0, canvas.width, canvas.height);\n      if (imgData.width != 0 && imgData.height != 0) camShift(imgData);\n    };\n\n    function camShift(frame) {\n      var w = frame.width;\n      var h = frame.height;\n\n      // search location\n      var m = meanShift(frame);\n\n      var a = m.mu20 * m.invM00;\n      var c = m.mu02 * m.invM00;\n\n      if (params.calcAngles) {\n        // use moments to find size and orientation\n        var b = m.mu11 * m.invM00;\n        var d = a + c;\n        var e = Math.sqrt(4 * b * b + (a - c) * (a - c));\n\n        // update object position\n        _trackObj.width = Math.sqrt((d - e) * 0.5) << 2;\n        _trackObj.height = Math.sqrt((d + e) * 0.5) << 2;\n        _trackObj.angle = Math.atan2(2 * b, a - c + e);\n\n        // to have a positive counter clockwise angle\n        if (_trackObj.angle < 0) _trackObj.angle = _trackObj.angle + Math.PI;\n      } else {\n        _trackObj.width = Math.sqrt(a) << 2;\n        _trackObj.height = Math.sqrt(c) << 2;\n        _trackObj.angle = Math.PI / 2;\n      }\n\n      // check if tracked object is into the limit\n      _trackObj.x = Math.floor(\n        Math.max(0, Math.min(_searchWindow.x + _searchWindow.width / 2, w))\n      );\n      _trackObj.y = Math.floor(\n        Math.max(0, Math.min(_searchWindow.y + _searchWindow.height / 2, h))\n      );\n\n      // new search window size\n      _searchWindow.width = Math.floor(1.1 * _trackObj.width);\n      _searchWindow.height = Math.floor(1.1 * _trackObj.height);\n    }\n\n    function meanShift(frame) {\n      // mean-shift algorithm on frame\n\n      var w = frame.width;\n      var h = frame.height;\n      var imgData = frame.data;\n\n      var curHist = new headtrackr.camshift.Histogram(imgData);\n\n      var weights = getWeights(_modelHist, curHist);\n\n      // Color probabilities distributions\n      _pdf = getBackProjectionData(imgData, frame.width, frame.height, weights);\n\n      var m, x, y, i, wadx, wady, wadw, wadh;\n\n      var meanShiftIterations = 10; // maximum number of iterations\n\n      // store initial searchwindow\n      var prevx = _searchWindow.x;\n      var prevy = _searchWindow.y;\n\n      // Locate by iteration the maximum of density into the probability distributions\n      for (i = 0; i < meanShiftIterations; i++) {\n        // get searchwindow from _pdf:\n        wadx = Math.max(_searchWindow.x, 0);\n        wady = Math.max(_searchWindow.y, 0);\n        wadw = Math.min(wadx + _searchWindow.width, w);\n        wadh = Math.min(wady + _searchWindow.height, h);\n\n        m = new headtrackr.camshift.Moments(\n          _pdf,\n          wadx,\n          wady,\n          wadw,\n          wadh,\n          i == meanShiftIterations - 1\n        );\n        x = m.xc;\n        y = m.yc;\n\n        _searchWindow.x += (x - _searchWindow.width / 2) >> 0;\n        _searchWindow.y += (y - _searchWindow.height / 2) >> 0;\n\n        // if we have reached maximum density, get second moments and stop iterations\n        if (_searchWindow.x == prevx && _searchWindow.y == prevy) {\n          m = new headtrackr.camshift.Moments(\n            _pdf,\n            wadx,\n            wady,\n            wadw,\n            wadh,\n            true\n          );\n          break;\n        } else {\n          prevx = _searchWindow.x;\n          prevy = _searchWindow.y;\n        }\n      }\n\n      _searchWindow.x = Math.max(0, Math.min(_searchWindow.x, w));\n      _searchWindow.y = Math.max(0, Math.min(_searchWindow.y, h));\n\n      return m;\n    }\n\n    function getWeights(mh, ch) {\n      // Return an array of the probabilities of each histogram color bins\n      var weights = [];\n      var p;\n\n      // iterate over the entire histogram and compare\n      for (var i = 0; i < 4096; i++) {\n        if (ch.getBin(i) != 0) {\n          p = Math.min(mh.getBin(i) / ch.getBin(i), 1);\n        } else {\n          p = 0;\n        }\n        weights.push(p);\n      }\n\n      return weights;\n    }\n\n    function getBackProjectionData(imgData, idw, idh, weights, hsMap) {\n      // Return a matrix representing pixel color probabilities\n      var data = [];\n      var x, y, r, g, b, pos;\n      var a = [];\n\n      // TODO : we could use typed arrays here\n      // but we should then do a compatibilitycheck\n\n      for (x = 0; x < idw; x++) {\n        a = [];\n        for (y = 0; y < idh; y++) {\n          pos = (y * idw + x) * 4;\n          r = imgData[pos] >> 4;\n          g = imgData[pos + 1] >> 4;\n          b = imgData[pos + 2] >> 4;\n          a.push(weights[256 * r + 16 * g + b]);\n        }\n        data[x] = a;\n      }\n      return data;\n    }\n  };\n\n  /**\n   * Object returned by tracker\n   *  note that x,y is the point of the center of the tracker\n   *\n   * @constructor\n   */\n  headtrackr.camshift.TrackObj = function() {\n    this.height = 0;\n    this.width = 0;\n    this.angle = 0;\n    this.x = 0;\n    this.y = 0;\n\n    this.clone = function() {\n      var c = new headtrackr.camshift.TrackObj();\n      c.height = this.height;\n      c.width = this.width;\n      c.angle = this.angle;\n      c.x = this.x;\n      c.y = this.y;\n      return c;\n    };\n  };\n  /**\n   * Library for detecting and tracking the position of a face in a canvas object\n   *\n   * usage:\n   *\t // create a new tracker\n   *\t var ft = new headtrackr.facetrackr.Tracker();\n   *\t // initialize it with a canvas\n   *\t ft.init(some_canvas);\n   *\t // track in canvas\n   *\t ft.track();\n   *\t // get position of found object\n   *\t var currentPos = ft.getTrackObj();\n   *\t currentPos.x // x-coordinate of center of object on canvas\n   *\t currentPos.y // y-coordinate of center of object on canvas\n   *\t currentPos.width // width of object\n   *\t currentPos.height // height of object\n   *\t currentPos.angle // angle of object in radians\n   *\t currentPos.confidence // returns confidence (doesn't work for CS yet)\n   *\t currentPos.detection // current detectionmethod (VJ or CS)\n   *\t currentPos.time // time spent\n   *\n   * @author auduno / github.com/auduno\n   */\n\n  headtrackr.facetrackr = {};\n\n  /**\n   * optional parameters to params:\n   *\t smoothing : whether to use smoothing on output (default is true)\n   *\t smoothingInterval : should be the same as detectionInterval plus time of tracking (default is 35 ms)\n   *\t sendEvents : whether to send events (default is true)\n   *\t whitebalancing : whether to wait for camera whitebalancing before starting detection (default is true)\n   *   calcAnglss : whether to calculate orientation of tracked object (default for facetrackr is false)\n   *\n   * @constructor\n   */\n  headtrackr.facetrackr.Tracker = function(params) {\n    if (!params) params = {};\n\n    if (params.sendEvents === undefined) params.sendEvents = true;\n    if (params.whitebalancing === undefined) params.whitebalancing = true;\n    if (params.debug === undefined) {\n      params.debug = false;\n    } else {\n      if (params.debug.tagName != 'CANVAS') params.debug = false;\n    }\n    if (params.whitebalancing) {\n      var _currentDetection = 'WB';\n    } else {\n      var _currentDetection = 'VJ';\n    }\n    if (params.calcAngles == undefined) params.calcAngles = false;\n\n    var _inputcanvas, _curtracked, _cstracker;\n\n    var _confidenceThreshold = -10; // needed confidence before switching to Camshift\n    var previousWhitebalances = []; // array of previous 10 whitebalance values\n    var pwbLength = 15;\n\n    this.init = function(inputcanvas) {\n      _inputcanvas = inputcanvas;\n      // initialize cs tracker\n      _cstracker = new headtrackr.camshift.Tracker({\n        calcAngles: params.calcAngles,\n      });\n    };\n\n    this.track = function() {\n      var result;\n      // do detection\n      if (_currentDetection == 'WB') {\n        result = checkWhitebalance();\n      } else if (_currentDetection == 'VJ') {\n        result = doVJDetection();\n      } else if (_currentDetection == 'CS') {\n        result = doCSDetection();\n      }\n\n      // check whether whitebalance is stable before starting detection\n      if (result.detection == 'WB') {\n        if (previousWhitebalances.length >= pwbLength)\n          previousWhitebalances.pop();\n        previousWhitebalances.unshift(result.wb);\n        if (previousWhitebalances.length == pwbLength) {\n          //get max\n          var max = Math.max.apply(null, previousWhitebalances);\n          //get min\n          var min = Math.min.apply(null, previousWhitebalances);\n\n          // if difference between the last ten whitebalances is less than 2,\n          //   we assume whitebalance is stable\n          if (max - min < 2) {\n            // switch to facedetection\n            _currentDetection = 'VJ';\n          }\n        }\n      }\n      // check if Viola-Jones has found a viable face\n      if (\n        result.detection == 'VJ' &&\n        result.confidence > _confidenceThreshold\n      ) {\n        // switch to Camshift\n        _currentDetection = 'CS';\n        // when switching, we initalize camshift with current found face\n        var cRectangle = new headtrackr.camshift.Rectangle(\n          Math.floor(result.x),\n          Math.floor(result.y),\n          Math.floor(result.width),\n          Math.floor(result.height)\n        );\n        _cstracker.initTracker(_inputcanvas, cRectangle);\n      }\n\n      _curtracked = result;\n\n      if (result.detection == 'CS' && params.sendEvents) {\n        // send events\n        var evt = document.createEvent('Event');\n        evt.initEvent('facetrackingEvent', true, true);\n        evt.height = result.height;\n        evt.width = result.width;\n        evt.angle = result.angle;\n        evt.x = result.x;\n        evt.y = result.y;\n        evt.confidence = result.confidence;\n        evt.detection = result.detection;\n        evt.time = result.time;\n        document.dispatchEvent(evt);\n      }\n    };\n\n    this.getTrackingObject = function() {\n      return _curtracked.clone();\n    };\n\n    // Viola-Jones detection\n    function doVJDetection() {\n      // start timing\n      var start = new Date().getTime();\n\n      // we seem to have to copy canvas to avoid interference with camshift\n      // not entirely sure why\n      // TODO: ways to avoid having to copy canvas every time\n      var ccvCanvas = document.createElement('canvas');\n      ccvCanvas.width = _inputcanvas.width;\n      ccvCanvas.height = _inputcanvas.height;\n      ccvCanvas\n        .getContext('2d')\n        .drawImage(_inputcanvas, 0, 0, ccvCanvas.width, ccvCanvas.height);\n\n      var comp = headtrackr.ccv.detect_objects(\n        headtrackr.ccv.grayscale(ccvCanvas),\n        cascade,\n        5,\n        1\n      );\n\n      // end timing\n      var diff = new Date().getTime() - start;\n\n      // loop through found faces and pick the most likely one\n      // TODO: check amount of neighbors and size as well?\n      // TODO: choose the face that is most in the center of canvas?\n      var candidate;\n      if (comp.length > 0) {\n        candidate = comp[0];\n      }\n      for (var i = 1; i < comp.length; i++) {\n        if (comp[i].confidence > candidate.confidence) {\n          candidate = comp[i];\n        }\n      }\n\n      // copy information from ccv object to a new trackObj\n      var result = new headtrackr.facetrackr.TrackObj();\n      if (!(candidate === undefined)) {\n        result.width = candidate.width;\n        result.height = candidate.height;\n        result.x = candidate.x;\n        result.y = candidate.y;\n        result.confidence = candidate.confidence;\n      }\n\n      // copy timing to object\n      result.time = diff;\n      result.detection = 'VJ';\n\n      return result;\n    }\n\n    // Camshift detection\n    function doCSDetection() {\n      // start timing\n      var start = new Date().getTime();\n      // detect\n      _cstracker.track(_inputcanvas);\n      var csresult = _cstracker.getTrackObj();\n\n      // if debugging, draw backprojection image on debuggingcanvas\n      if (params.debug) {\n        params.debug\n          .getContext('2d')\n          .putImageData(_cstracker.getBackProjectionImg(), 0, 0);\n      }\n\n      // end timing\n      var diff = new Date().getTime() - start;\n\n      // copy information from CS object to a new trackObj\n      var result = new headtrackr.facetrackr.TrackObj();\n      result.width = csresult.width;\n      result.height = csresult.height;\n      result.x = csresult.x;\n      result.y = csresult.y;\n      // TODO: should we adjust this angle to be \"clockwise\"?\n      result.angle = csresult.angle;\n      // TODO: camshift should pass along some sort of confidence?\n      result.confidence = 1;\n\n      // copy timing to object\n      result.time = diff;\n      result.detection = 'CS';\n\n      return result;\n    }\n\n    // Whitebalancing\n    function checkWhitebalance() {\n      var result = new headtrackr.facetrackr.TrackObj();\n      // get whitebalance value\n      result.wb = headtrackr.getWhitebalance(_inputcanvas);\n      result.detection = 'WB';\n\n      return result;\n    }\n  };\n\n  /**\n   * @constructor\n   */\n  headtrackr.facetrackr.TrackObj = function() {\n    this.height = 0;\n    this.width = 0;\n    this.angle = 0;\n    this.x = 0;\n    this.y = 0;\n    this.confidence = -10000;\n    this.detection = '';\n    this.time = 0;\n\n    this.clone = function() {\n      var c = new headtrackr.facetrackr.TrackObj();\n      c.height = this.height;\n      c.width = this.width;\n      c.angle = this.angle;\n      c.x = this.x;\n      c.y = this.y;\n      c.confidence = this.confidence;\n      c.detection = this.detection;\n      c.time = this.time;\n      return c;\n    };\n  };\n\n  /**\n   * @author auduno / github.com/auduno\n   * @constructor\n   */\n\n  headtrackr.Ui = function() {\n    var timeout;\n\n    // create element and attach to body\n    var d = document.createElement('div'),\n      d2 = document.createElement('div'),\n      p = document.createElement('p');\n    d.setAttribute('id', 'headtrackerMessageDiv');\n\n    d.style.left = '20%';\n    d.style.right = '20%';\n    d.style.top = '30%';\n    d.style.fontSize = '90px';\n    d.style.color = '#777';\n    d.style.position = 'absolute';\n    d.style.fontFamily = 'Helvetica, Arial, sans-serif';\n    d.style.zIndex = '100002';\n\n    d2.style.marginLeft = 'auto';\n    d2.style.marginRight = 'auto';\n    d2.style.width = '100%';\n    d2.style.textAlign = 'center';\n    d2.style.color = '#fff';\n    d2.style.backgroundColor = '#444';\n    d2.style.opacity = '0.5';\n\n    p.setAttribute('id', 'headtrackerMessage');\n    d2.appendChild(p);\n    d.appendChild(d2);\n    document.body.appendChild(d);\n\n    var supportMessages = {\n      'no getUserMedia': 'getUserMedia is not supported in your browser :(',\n      'no camera': 'no camera found :(',\n    };\n\n    var statusMessages = {\n      whitebalance: 'Waiting for camera whitebalancing',\n      detecting: 'Please wait while camera is detecting your face...',\n      hints:\n        'We seem to have some problems detecting your face. Please make sure that your face is well and evenly lighted, and that your camera is working.',\n      redetecting: 'Lost track of face, trying to detect again..',\n      lost: 'Lost track of face :(',\n      found: 'Face found! Move your head!',\n    };\n\n    var override = false;\n\n    // function to call messages (and to fade them out after a time)\n    document.addEventListener(\n      'headtrackrStatus',\n      function(event) {\n        if (event.status in statusMessages) {\n          window.clearTimeout(timeout);\n          if (!override) {\n            var messagep = document.getElementById('headtrackerMessage');\n            messagep.innerHTML = statusMessages[event.status];\n            timeout = window.setTimeout(function() {\n              messagep.innerHTML = '';\n            }, 3000);\n          }\n        } else if (event.status in supportMessages) {\n          override = true;\n          window.clearTimeout(timeout);\n          var messagep = document.getElementById('headtrackerMessage');\n          messagep.innerHTML = supportMessages[event.status];\n          window.setTimeout(function() {\n            messagep.innerHTML = 'added fallback video for demo';\n          }, 2000);\n          window.setTimeout(function() {\n            messagep.innerHTML = '';\n            override = false;\n          }, 4000);\n        }\n      },\n      true\n    );\n  };\n  /**\n   * Calculates an estimate of the position of the head of the user in relation to screen or camera\n   *   based on input from facetrackrObject\n   *\n   * Usage:\n   *\tvar hp = new headtrackr.headposition.Tracker(facetrackrObject, 640, 480);\n   *\tvar currentPosition = hp.track(facetrackrObject);\n   *\n   * @author auduno / github.com/auduno\n   */\n\n  headtrackr.headposition = {};\n\n  /**\n   *\n   * Parameters to Tracker() are:\n   *\tfacetrackrObject : a generic object with attributes x, y, width, height, angle\n   *\t\twhich describe the position of center of detected face\n   *\tcamwidth : width of canvas where the face was detected\n   *\tcamheight : height of canvas where the face was detected\n   *\n   * Optional parameters can be passed along like this:\n   *\t headtrackr.headposition.Tracker(facetrackrObject, 640, 480, {fov : 60})\n   *\n   * Optional parameters:\n   *\t fov {number} : horizontal field of view of camera (default is to detect via distance to screen, any fov overrides distance_to_screen)\n   *\t distance_to_screen {number} : initial distance from face to camera, in cms (default is 60 cm)\n   *\t edgecorrection {boolean} : whether to use heuristic for position of head when detection is on the edge of the screen (default is true)\n   *\t distance_from_camera_to_screen : distance from camera to center of screen (default is 11.5 cm, typical for laptops)\n   *\n   * Returns a generic object with attributes x, y, z which is estimated headposition in cm in relation to center of screen\n   *\n   * @constructor\n   */\n  headtrackr.headposition.Tracker = function(\n    facetrackrObj,\n    camwidth,\n    camheight,\n    params\n  ) {\n    // some assumptions that are used when calculating distances and estimating horizontal fov\n    //\t head width = 16 cm\n    //\t head height = 19 cm\n    //\t when initialized, user is approximately 60 cm from camera\n\n    if (!params) params = {};\n\n    if (params.edgecorrection === undefined) {\n      var edgecorrection = true;\n    } else {\n      var edgecorrection = params.edgecorrection;\n    }\n\n    this.camheight_cam = camheight;\n    this.camwidth_cam = camwidth;\n\n    var head_width_cm = 16;\n    var head_height_cm = 19;\n\n    // angle between side of face and diagonal across\n    var head_small_angle = Math.atan(head_width_cm / head_height_cm);\n\n    var head_diag_cm = Math.sqrt(\n      head_width_cm * head_width_cm + head_height_cm * head_height_cm\n    ); // diagonal of face in real space\n\n    var sin_hsa = Math.sin(head_small_angle); //precalculated sine\n    var cos_hsa = Math.cos(head_small_angle); //precalculated cosine\n    var tan_hsa = Math.tan(head_small_angle); //precalculated tan\n\n    // estimate horizontal field of view of camera\n    var init_width_cam = facetrackrObj.width;\n    var init_height_cam = facetrackrObj.height;\n    var head_diag_cam = Math.sqrt(\n      init_width_cam * init_width_cam + init_height_cam * init_height_cam\n    );\n    if (params.fov === undefined) {\n      // we use the diagonal of the faceobject to estimate field of view of the camera\n      // we use the diagonal since this is less sensitive to errors in width or height\n      var head_width_cam = sin_hsa * head_diag_cam;\n      var camwidth_at_default_face_cm =\n        this.camwidth_cam / head_width_cam * head_width_cm;\n      // we assume user is sitting around 60 cm from camera (normal distance on a laptop)\n      if (params.distance_to_screen === undefined) {\n        var distance_to_screen = 60;\n      } else {\n        var distance_to_screen = params.distance_to_screen;\n      }\n      // calculate estimate of field of view\n      var fov_width =\n        Math.atan(camwidth_at_default_face_cm / 2 / distance_to_screen) * 2;\n    } else {\n      var fov_width = params.fov * Math.PI / 180;\n    }\n\n    // precalculate ratio between camwidth and distance\n    var tan_fov_width = 2 * Math.tan(fov_width / 2);\n\n    var x, y, z; // holds current position of head (in cms from center of screen)\n\n    this.track = function(facetrackrObj) {\n      var w = facetrackrObj.width;\n      var h = facetrackrObj.height;\n      var fx = facetrackrObj.x;\n      var fy = facetrackrObj.y;\n\n      if (edgecorrection) {\n        // recalculate head_diag_cam, fx, fy\n\n        var margin = 11;\n\n        var leftDistance = fx - w / 2;\n        var rightDistance = this.camwidth_cam - (fx + w / 2);\n        var topDistance = fy - h / 2;\n        var bottomDistance = this.camheight_cam - (fy + h / 2);\n\n        var onVerticalEdge = leftDistance < margin || rightDistance < margin;\n        var onHorizontalEdge = topDistance < margin || bottomDistance < margin;\n\n        if (onHorizontalEdge) {\n          if (onVerticalEdge) {\n            // we are in a corner, use previous diagonal as estimate, i.e. don't change head_diag_cam\n            var onLeftEdge = leftDistance < margin;\n            var onTopEdge = topDistance < margin;\n\n            if (onLeftEdge) {\n              fx = w - head_diag_cam * sin_hsa / 2;\n            } else {\n              fx = fx - w / 2 + head_diag_cam * sin_hsa / 2;\n            }\n\n            if (onTopEdge) {\n              fy = h - head_diag_cam * cos_hsa / 2;\n            } else {\n              fy = fy - h / 2 + head_diag_cam * cos_hsa / 2;\n            }\n          } else {\n            // we are on top or bottom edge of camera, use width instead of diagonal and correct y-position\n            // fix fy\n            if (topDistance < margin) {\n              var originalWeight = topDistance / margin;\n              var estimateWeight = (margin - topDistance) / margin;\n              fy =\n                h -\n                (originalWeight * (h / 2) + estimateWeight * (w / tan_hsa / 2));\n              head_diag_cam =\n                estimateWeight * (w / sin_hsa) +\n                originalWeight * Math.sqrt(w * w + h * h);\n            } else {\n              var originalWeight = bottomDistance / margin;\n              var estimateWeight = (margin - bottomDistance) / margin;\n              fy =\n                fy -\n                h / 2 +\n                (originalWeight * (h / 2) + estimateWeight * (w / tan_hsa / 2));\n              head_diag_cam =\n                estimateWeight * (w / sin_hsa) +\n                originalWeight * Math.sqrt(w * w + h * h);\n            }\n          }\n        } else if (onVerticalEdge) {\n          // we are on side edges of camera, use height and correct x-position\n          if (leftDistance < margin) {\n            var originalWeight = leftDistance / margin;\n            var estimateWeight = (margin - leftDistance) / margin;\n            head_diag_cam =\n              estimateWeight * (h / cos_hsa) +\n              originalWeight * Math.sqrt(w * w + h * h);\n            fx =\n              w -\n              (originalWeight * (w / 2) + estimateWeight * (h * tan_hsa / 2));\n          } else {\n            var originalWeight = rightDistance / margin;\n            var estimateWeight = (margin - rightDistance) / margin;\n            head_diag_cam =\n              estimateWeight * (h / cos_hsa) +\n              originalWeight * Math.sqrt(w * w + h * h);\n            fx =\n              fx -\n              w / 2 +\n              (originalWeight * (w / 2) + estimateWeight * (h * tan_hsa / 2));\n          }\n        } else {\n          head_diag_cam = Math.sqrt(w * w + h * h);\n        }\n      } else {\n        head_diag_cam = Math.sqrt(w * w + h * h);\n      }\n\n      // calculate cm-distance from screen\n      z = head_diag_cm * this.camwidth_cam / (tan_fov_width * head_diag_cam);\n      // to transform to z_3ds : z_3ds = (head_diag_3ds/head_diag_cm)*z\n      // i.e. just use ratio\n\n      // calculate cm-position relative to center of screen\n      x = -(fx / this.camwidth_cam - 0.5) * z * tan_fov_width;\n      y =\n        -(fy / this.camheight_cam - 0.5) *\n        z *\n        tan_fov_width *\n        (this.camheight_cam / this.camwidth_cam);\n\n      // Transformation from position relative to camera, to position relative to center of screen\n      if (params.distance_from_camera_to_screen === undefined) {\n        // default is 11.5 cm approximately\n        y = y + 11.5;\n      } else {\n        y = y + params.distance_from_camera_to_screen;\n      }\n\n      // send off event\n      var evt = document.createEvent('Event');\n      evt.initEvent('headtrackingEvent', true, true);\n      evt.x = x;\n      evt.y = y;\n      evt.z = z;\n      document.dispatchEvent(evt);\n\n      return new headtrackr.headposition.TrackObj(x, y, z);\n    };\n\n    this.getTrackerObj = function() {\n      return new headtrackr.headposition.TrackObj(x, y, z);\n    };\n\n    this.getFOV = function() {\n      return fov_width * 180 / Math.PI;\n    };\n  };\n\n  /**\n   * @constructor\n   */\n  headtrackr.headposition.TrackObj = function(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n\n    this.clone = function() {\n      var c = new headtrackr.headposition.TrackObj();\n      c.x = this.x;\n      c.y = this.y;\n      c.z = this.z;\n      return c;\n    };\n  };\n  /**\n   * Optional controllers for handling headtrackr events\n   *\n   * @author auduno / github.com/auduno\n   */\n\n  headtrackr.controllers = {};\n\n  return headtrackr;\n};\n\nexport default headtrackr();\n","// @flow\n\nimport * as React from 'react';\nimport debounce from 'lodash-es/debounce';\n\nimport HT from 'util/headtracker';\nimport Recorder from './recorder';\nimport ProgressBar from 'components/ProgressBar';\nimport IdOverlay from 'components/IdOverlay';\nimport {\n  Container,\n  VideoContainer,\n  Title,\n  OverlayContainer,\n  OverlayContent,\n  RecButton,\n} from './styled';\n\nconst DEFAULT_RECORD_TIME = 5000;\n\ntype Props = {\n  activatedCbk: () => void,\n  endCbk: (recordedBlob: any) => void,\n  videoOptions: VideoOptions,\n  title: string,\n  svgoverlay?: string,\n  recordingTime?: number,\n};\n\ntype State = {\n  mediaActivated: boolean,\n  recording: boolean,\n  prgsBarValue: number,\n  overlaySize: { width: number, height: number },\n};\n\nexport class MediaCapture extends React.Component<Props, State> {\n  state = {\n    mediaActivated: false,\n    recording: false,\n    prgsBarValue: 0,\n    overlaySize: { width: 300, height: 300 },\n  };\n  static defaultProps = {\n    videoOptions: {\n      faceDetection: true,\n      recordingTime: 5000,\n      mediaRecorder: true,\n      constrains: { audio: false, video: true },\n      imageType: 'image/jpeg',\n      fps: 20,\n      quality: 0.5,\n      overlayAutoRotation: false,\n    },\n  };\n  video: ?HTMLVideoElement;\n  pgsBarInterval: IntervalID;\n  captureInterval: IntervalID;\n  canvasDraw: ?HTMLCanvasElement;\n  canvasCapture: ?HTMLCanvasElement;\n  htracker: {};\n  overlayContext: any;\n\n  constructor(props: Props) {\n    super(props);\n    if (props.videoOptions.faceDetection) {\n      this.htracker = new HT.Tracker({\n        faceDetection: props.videoOptions.faceDetection,\n        calcAngles: props.videoOptions.faceAngleDetection,\n        headPosition: true,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.video && this.video.srcObject) {\n      const tracks = this.video.srcObject.getTracks();\n      tracks.forEach(track => track.stop());\n    }\n    this.stopFaceDetection();\n    clearInterval(this.pgsBarInterval);\n    this.toggleFullScreen();\n  }\n\n  componentDidMount() {\n    this.toggleFullScreen();\n    log(this.props.videoOptions.constrains);\n    this.overlayContext = this.canvasDraw.getContext('2d');\n    if (navigator.mediaDevices) {\n      navigator.mediaDevices\n        .getUserMedia(this.props.videoOptions.constrains)\n        .then((stream: CanvasCaptureMediaStream) => {\n          this.video.srcObject = stream;\n        })\n        .then(this.setCanvasSizes)\n        .then(this.props.activatedCbk)\n        .then(() => this.setState({ mediaActivated: true }))\n        .catch((error: any) => {\n          log('no camera', error);\n        });\n    }\n    this.startFaceDetection();\n  }\n\n  toggleFullScreen = () => {\n    if (\n      !document.fullscreenElement && // alternative standard method\n      !document.mozFullScreenElement &&\n      !document.webkitFullscreenElement\n    ) {\n      // current working methods\n      if (document.documentElement.requestFullscreen) {\n        document.documentElement.requestFullscreen();\n      } else if (document.documentElement.mozRequestFullScreen) {\n        document.documentElement.mozRequestFullScreen();\n      } else if (document.documentElement.webkitRequestFullscreen) {\n        document.documentElement.webkitRequestFullscreen(\n          Element.ALLOW_KEYBOARD_INPUT\n        );\n      }\n    } else {\n      if (document.cancelFullScreen) {\n        document.cancelFullScreen();\n      } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen();\n      } else if (document.webkitCancelFullScreen) {\n        document.webkitCancelFullScreen();\n      }\n    }\n  };\n\n  startFaceDetection = () => {\n    if (this.props.videoOptions.faceDetection) {\n      this.htracker.init(this.video, this.canvasCapture);\n      this.htracker.start();\n      document.addEventListener('facetrackingEvent', this.faceTrackPaint);\n      // document.addEventListener('headtrackrStatus', this.trackStatus);\n      this.canvasDraw.style.display = 'inherit';\n    }\n  };\n\n  stopFaceDetection = () => {\n    if (this.props.videoOptions.faceDetection && this.htracker) {\n      this.canvasDraw.style.display = 'none';\n      document.removeEventListener('facetrackingEvent', this.faceTrackPaint);\n      // document.removeEventListener('headtrackrStatus', this.trackStatus);\n      this.htracker.stop();\n    }\n  };\n\n  faceTrackPaint = event => {\n    const width = this.video.videoWidth;\n    const height = this.video.videoHeight;\n    this.overlayContext.clearRect(0, 0, width, height);\n    if (event.detection == 'CS') {\n      this.overlayContext.translate(event.x, event.y);\n      this.overlayContext.rotate(event.angle - Math.PI / 2);\n      this.overlayContext.strokeStyle = '#00FF00';\n      this.overlayContext.strokeRect(\n        -(event.width / 2) >> 0,\n        -(event.height / 2) >> 0,\n        event.width,\n        event.height\n      );\n      this.overlayContext.rotate(Math.PI / 2 - event.angle);\n      this.overlayContext.translate(-event.x, -event.y);\n    }\n  };\n\n  // trackStatus = event => {\n  //   log(event.status);\n  // };\n\n  // Set same size as video for both canvas\n  setCanvasSizes = () => {\n    const video = this.video || {};\n    if (video) {\n      video.onloadedmetadata = () => {\n        const { videoHeight = 0, videoWidth = 0 } = video;\n        this.canvasCapture.height = videoHeight;\n        this.canvasCapture.width = videoWidth;\n        this.canvasDraw.height = videoHeight;\n        this.canvasDraw.width = videoWidth;\n        this.calcOverlaySize();\n        window.onresize = debounce(this.calcOverlaySize, 100);\n      };\n    }\n  };\n\n  // Calc the real video frame size\n  calcOverlaySize = () => {\n    const { videoWidth, videoHeight, clientWidth, clientHeight } =\n      this.video || {};\n    let width = clientWidth;\n    let height = clientHeight;\n    if (videoHeight / videoWidth > clientHeight / clientWidth) {\n      width = videoWidth * clientHeight / videoHeight;\n    } else {\n      height = videoHeight * clientWidth / videoWidth;\n    }\n    height = height > clientHeight - 120 ? clientHeight - 120 : height - 20;\n    this.setState({ overlaySize: { width, height } });\n  };\n\n  recordMedia = () => {\n    let data = [];\n    this.stopFaceDetection();\n    const recorder = Recorder(\n      this.video,\n      this.canvasCapture,\n      this.props.videoOptions\n    );\n    recorder.ondataavailable = event => (data = event.data);\n    recorder.start();\n    recorder.onstop = () => this.props.endCbk(data);\n    recorder.onerror = event => log(event.name);\n    this.triggerProgressBar(() => recorder.stop());\n    this.setState({ recording: true });\n  };\n\n  triggerProgressBar = (cb: Function): void => {\n    const recTime = this.props.recordingTime || DEFAULT_RECORD_TIME;\n    this.pgsBarInterval = setInterval(() => {\n      const prgsBarValue = this.state.prgsBarValue;\n      if (this.state.prgsBarValue > 100) {\n        clearInterval(this.pgsBarInterval);\n        cb();\n      } else {\n        this.setState({ prgsBarValue: prgsBarValue + 1 });\n      }\n    }, recTime / 100);\n  };\n\n  render = () => {\n    const {\n      title,\n      svgoverlay,\n      videoOptions: { overlayAutoRotation },\n    } = this.props;\n    const { overlaySize } = this.state;\n    return (\n      <Container mediaActivated={this.state.mediaActivated}>\n        <VideoContainer>\n          <Title>{title}</Title>\n          <video\n            autoPlay\n            style={{\n              width: '100%',\n              height: '100%',\n              maxHeight: '100%',\n            }}\n            ref={video => {\n              this.video = video;\n            }}\n          />\n          {svgoverlay ? (\n            <OverlayContainer>\n              <OverlayContent\n                rotate={overlayAutoRotation.toString()}\n                overlaysize={overlaySize}\n              >\n                <IdOverlay svgoverlay={svgoverlay} />\n              </OverlayContent>\n            </OverlayContainer>\n          ) : null}\n          <RecButton\n            onClick={this.recordMedia}\n            recording={this.state.recording}\n          >\n            <ProgressBar\n              style=\"circular\"\n              value={this.state.prgsBarValue}\n              border={20}\n              color=\"red\"\n              background=\"black\"\n              bgOpacity={0.2}\n            />\n          </RecButton>\n          <canvas\n            ref={canvas => {\n              this.canvasDraw = canvas;\n            }}\n            style={{\n              position: 'absolute',\n              top: '0px',\n              left: '0px',\n              width: '100%',\n              height: '100%',\n              display: 'none',\n            }}\n          />\n        </VideoContainer>\n        <canvas\n          ref={canvas => {\n            this.canvasCapture = canvas;\n          }}\n          style={{\n            visibility: 'hidden',\n          }}\n        />\n      </Container>\n    );\n  };\n}\n","module.exports = __webpack_public_path__ + \"static/media/step3.654ec7a9.gif\";","module.exports = __webpack_public_path__ + \"static/media/step2.ea762e4d.gif\";","module.exports = __webpack_public_path__ + \"static/media/step1.d7e2ed8b.gif\";","import styled from 'styled-components';\n\nexport const ProgressBarStyled = styled.svg`\n  path {\n    will-change: auto;\n    stroke-width: ${({ border }) => border}px;\n    stroke-miterlimit: round;\n    ${({ speed }) =>\n      `transition: stroke-dasharray ${speed.toString()}s linear;`};\n  }\n`;\n","import styled from 'styled-components';\n\nexport const StyledButton = styled.button`\n  border-radius: 3px;\n  width: ${props => props.width || 'auto'};\n  height: ${props => props.height || '42px'};\n  font-size: 1rem;\n  color: white;\n  background: ${props => props.color || '#007DC2'};\n  border-bottom: solid 3px ${props => props.color || '#007DC2'};\n  :hover {\n    cursor: pointer;\n  }\n  :active {\n    outline-style: none;\n    border: none;\n  }\n`;\n","// @flow\n\nimport * as React from 'react';\n\nimport { history } from 'util/history';\nimport Button from 'components/Buttons';\nimport Icon from 'components/Icons';\nimport ProgressBar from 'components/ProgressBar';\nimport {\n  GreenCircle,\n  StepContainer,\n  StepCounter,\n  RedoLink,\n  StepTitle,\n  StepBodyText,\n} from './styled';\nimport { MediaCapture } from '../MediaCapture';\n\nconst START = 'START';\nconst ACTIVATING = 'ACTIVATING';\nconst ACTIVE = 'ACTIVE';\nconst CAPTURING = 'CAPTURING';\nconst COMPLETED = 'COMPLETED';\nconst StatusTxt = {\n  [START]: 'Start',\n  [ACTIVATING]: 'Activating camera',\n  [ACTIVE]: 'Camera active',\n  [CAPTURING]: 'Capturing',\n  [COMPLETED]: 'Next',\n};\n\ntype Props = {\n  videoOptions: VideoOptions,\n  saveVideo: Function,\n  mediaCaptureTxt: string,\n  CallToAction: React.ComponentType<{ status: string }>,\n  stepTitleTxt: string,\n  stepBodyTxt: string,\n  completedTxt: string,\n  nextRoute: string,\n  redoTxt: string,\n  stepNumber: number,\n  progressBarInitialValue: number,\n  progressBarStepValue: number,\n  svgOverlay?: string,\n  recordingTime?: number,\n  sessionId: string,\n  saveVideo: Function,\n};\ntype State = {\n  status: string,\n  progressBarValue: number,\n};\n\nclass Step extends React.Component<Props, State> {\n  state = {\n    status: START,\n    progressBarValue: this.props.progressBarInitialValue,\n  };\n  dnlButton: any;\n\n  constructor(props: Props) {\n    super(props);\n  }\n\n  setStatus = (status: string) => this.setState({ status });\n  setStatusActivatingMedia = () => this.setStatus(ACTIVATING);\n  setStatusActivatedMedia = () => this.setStatus(ACTIVE);\n  setStatusCaturing = () => this.setStatus(CAPTURING);\n  setStatusComplete = (recordedData: any) => {\n    this.setStatus(COMPLETED);\n    setTimeout(\n      () =>\n        this.setState({ progressBarValue: this.props.progressBarStepValue }),\n      100\n    );\n    if (recordedData instanceof Blob) {\n      // if recordedData is a Blob extract it\n      // and send as a Webm video from MediaRecorder\n      const reader = new FileReader();\n      reader.addEventListener('loadend', () => {\n        this.sendVideoData(reader.result);\n        this.dnlButton.href = recordedData;\n        this.dnlButton.download = 'RecordedVideo.webm';\n      });\n      reader.readAsDataURL(recordedData);\n    } else {\n      this.sendVideoData(recordedData);\n    }\n  };\n\n  sendVideoData = (videoData: Array<any> | Blob) => {\n    const { saveVideo, sessionId, stepNumber, videoOptions } = this.props;\n    if (this.props.videoOptions.recordEnabled) {\n      saveVideo({\n        sessionId,\n        stepNumber,\n        videoData,\n        videoOptions,\n      });\n    } else {\n      log('Recording disabled!');\n    }\n  };\n\n  handleClick = () => {\n    if (this.state.status === START) {\n      this.setStatusActivatingMedia();\n    } else if (this.state.status === COMPLETED) {\n      history.push({\n        pathname: this.props.nextRoute,\n      });\n    }\n  };\n\n  render = () => {\n    const { status, progressBarValue } = this.state;\n    const {\n      videoOptions,\n      mediaCaptureTxt,\n      CallToAction,\n      stepTitleTxt,\n      stepBodyTxt,\n      stepNumber,\n      progressBarInitialValue,\n      completedTxt,\n      redoTxt,\n      svgOverlay,\n      recordingTime,\n    } = this.props;\n    return (\n      <StepContainer>\n        <CallToAction status={status}>\n          {status === COMPLETED\n            ? [\n                <GreenCircle key=\"1\">&#10003;</GreenCircle>,\n                <div key=\"2\">{completedTxt}</div>,\n                <a\n                  key=\"3\"\n                  ref={dnlButton => {\n                    this.dnlButton = dnlButton;\n                  }}\n                >\n                  <Icon icon=\"download\" size=\"15\" color=\"#007DC2\" />\n                </a>,\n              ]\n            : null}\n        </CallToAction>\n        <ProgressBar\n          value={progressBarValue}\n          border={2}\n          color=\"#007DC2\"\n          background=\"#007cc3\"\n          bgOpacity={0.2}\n          timeTransform={1.5}\n        />\n        <StepCounter>\n          Step {stepNumber} of 3 {status === COMPLETED ? 'Completed' : null}\n        </StepCounter>\n        <Body\n          status={status}\n          stepTitleTxt={stepTitleTxt}\n          stepBodyTxt={stepBodyTxt}\n        />\n        <Button width=\"100%\" onClick={this.handleClick}>\n          {StatusTxt[status]}\n        </Button>\n        {[ACTIVATING, ACTIVE, CAPTURING].includes(status) ? (\n          <MediaCapture\n            videoOptions={videoOptions}\n            activatedCbk={this.setStatusActivatedMedia}\n            endCbk={this.setStatusComplete}\n            title={mediaCaptureTxt}\n            svgoverlay={svgOverlay}\n            recordingTime={recordingTime}\n          />\n        ) : null}\n        {status === COMPLETED ? (\n          <RedoLink\n            onClick={() =>\n              this.setState({\n                status: START,\n                progressBarValue: progressBarInitialValue,\n              })\n            }\n          >\n            {redoTxt}\n          </RedoLink>\n        ) : null}\n      </StepContainer>\n    );\n  };\n}\n\ntype BodyProps = {\n  status: string,\n  stepTitleTxt: string,\n  stepBodyTxt: string,\n};\n\nconst Body = ({ status, stepTitleTxt, stepBodyTxt }: BodyProps) =>\n  status !== COMPLETED ? (\n    <span>\n      <StepTitle>{stepTitleTxt}</StepTitle>\n      <StepBodyText>{stepBodyTxt}</StepBodyText>\n    </span>\n  ) : null;\n\nexport default Step;\n","// @flow\n\nimport * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { saveVideo } from '../actions';\nimport Step from './Step';\nimport { CallToAction1, CallToAction2, CallToAction3 } from './styled';\n\ntype StepProps = {\n  sessionId: string,\n  saveVideo: Function,\n  recordingTime: string,\n  videoOptions: VideoOptions,\n  resolution: Array<string>,\n  idType?: string,\n};\n\nconst Step1Component = (props: StepProps) => (\n  <Step\n    videoOptions={{\n      ...props.videoOptions,\n      constrains: {\n        audio: false,\n        video: {\n          facingMode: 'environment',\n          width: props.resolution[0],\n          height: props.resolution[1],\n        },\n      },\n    }}\n    mediaCaptureTxt=\"Align passport photo page to boundaries for 5 seconds.\"\n    CallToAction={CallToAction1}\n    stepTitleTxt=\"New Zealand passport capture\"\n    stepBodyTxt=\"Align passport photo page to boundaries for 5 seconds.\"\n    stepNumber={1}\n    progressBarInitialValue={0}\n    progressBarStepValue={34}\n    completedTxt=\"Passport capture complete\"\n    nextRoute=\"/biometric-id/step2\"\n    redoTxt=\"Redo passport capture\"\n    svgOverlay={props.idType}\n    recordingTime={+props.recordingTime * 1000}\n    sessionId={props.sessionId}\n    saveVideo={props.saveVideo}\n  />\n);\n\nconst Step2Component = (props: StepProps) => (\n  <Step\n    videoOptions={{\n      ...props.videoOptions,\n      constrains: {\n        audio: false,\n        video: {\n          facingMode: 'user',\n          width: props.resolution[0],\n          height: props.resolution[1],\n        },\n      },\n    }}\n    mediaCaptureTxt=\"Hold passport photo page next to your face for 5 seconds.\"\n    CallToAction={CallToAction2}\n    stepTitleTxt=\"Face &amp; Passport\"\n    stepBodyTxt=\"Place Passport photo page open next to your head and tilt the passport back and forward slightly.\"\n    stepNumber={2}\n    progressBarInitialValue={34}\n    progressBarStepValue={66}\n    completedTxt=\"Face &amp; passport capture complete\"\n    nextRoute=\"/biometric-id/step3\"\n    redoTxt=\"Redo face and passport capture\"\n    recordingTime={+props.recordingTime * 1000}\n    sessionId={props.sessionId}\n    saveVideo={props.saveVideo}\n  />\n);\n\nconst Step3Component = (props: StepProps) => (\n  <Step\n    videoOptions={{\n      ...props.videoOptions,\n      constrains: {\n        audio: false,\n        video: {\n          facingMode: 'user',\n          width: props.resolution[0],\n          height: props.resolution[1],\n        },\n      },\n    }}\n    mediaCaptureTxt=\"&quot;I want to open a BNZ account.&quot;\"\n    CallToAction={CallToAction3}\n    stepTitleTxt=\"Repeat a simple phrase\"\n    stepBodyTxt=\"Clearly repeat the words shown to you on the top of the next screen.\"\n    stepNumber={3}\n    progressBarInitialValue={66}\n    progressBarStepValue={100}\n    completedTxt=\"Repeat a simple phrase completed\"\n    nextRoute=\"/biometric-id/end\"\n    redoTxt=\"Redo Repeat a simple phrase\"\n    recordingTime={+props.recordingTime * 1000}\n    sessionId={props.sessionId}\n    saveVideo={props.saveVideo}\n  />\n);\n\nconst mapStateToProps = ({\n  biometricId: {\n    sessionId,\n    settings: {\n      autoStartOnDetection,\n      captureVideo,\n      videoQuality,\n      framesPerSecond,\n      recordingTime,\n      faceDetection,\n      faceAngleDetection,\n      imageType,\n      idType,\n      resolution,\n      useMediaRecorderApi,\n      overlayAutoRotation,\n    },\n  },\n}) => ({\n  sessionId,\n  recordingTime,\n  idType,\n  videoOptions: {\n    autoStartOnDetection,\n    recordEnabled: captureVideo,\n    faceDetection,\n    faceAngleDetection,\n    useMediaRecorderApi,\n    fps: +framesPerSecond,\n    quality: +videoQuality,\n    imageType,\n    overlayAutoRotation,\n  },\n  resolution: resolution.split('x'),\n});\n\nexport const Step1 = connect(mapStateToProps, { saveVideo })(Step1Component);\nexport const Step2 = connect(mapStateToProps, { saveVideo })(Step2Component);\nexport const Step3 = connect(mapStateToProps, { saveVideo })(Step3Component);\n","import { Step1, Step2, Step3 } from './Steps';\nimport { Start } from './Start';\nimport { End } from './End';\n\nexport default [\n  {\n    exact: true,\n    path: '/biometric-id',\n    component: Start,\n  },\n  {\n    exact: true,\n    path: '/biometric-id/step1',\n    component: Step1,\n  },\n  {\n    exact: true,\n    path: '/biometric-id/step2',\n    component: Step2,\n  },\n  {\n    exact: true,\n    path: '/biometric-id/step3',\n    component: Step3,\n  },\n  {\n    exact: true,\n    path: '/biometric-id/end',\n    component: End,\n  },\n];\n","// @flow\n\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Switch, Route } from 'react-router-dom';\n\nimport { initBiometricIdSession } from './actions';\nimport routes from './routes';\nimport { Container, Content, Title, JoinStepTitle } from './styled';\n\ntype State = { nextStep: number };\ntype Props = {\n  initBiometricIdSession: Function,\n};\nclass BiometricId extends React.Component<Props, State> {\n  state: State = { nextStep: 1 };\n  routes: Array<string> = ['start', 'step1', 'step2', 'step3', 'end'];\n\n  constructor(props: Props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    this.props.initBiometricIdSession();\n  }\n\n  nextStep = () => {\n    this.setState({ nextStep: this.state.nextStep + 1 });\n  };\n\n  render = () => (\n    <Container>\n      <Content>\n        <Title>Open an account</Title>\n        <JoinStepTitle active={true}>FACE & ID VERIFICATION</JoinStepTitle>\n        <Switch>\n          {routes.map((route, idx) => (\n            <Route key={idx} {...route} bioAuto={true} />\n          ))}\n        </Switch>\n        <span>\n          <JoinStepTitle active={false}>PASSWORD</JoinStepTitle>\n          <JoinStepTitle active={false}>DECLARATION</JoinStepTitle>\n        </span>\n      </Content>\n    </Container>\n  );\n}\n\nexport default connect(null, { initBiometricIdSession })(BiometricId);\n","import styled from 'styled-components';\n\nexport const Layout = styled.section`\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  justify-content: center;\n  height: calc(100vh - 120px);\n`;\n\nexport const Header = styled.div`\n  background-color: #fff;\n  height: 150px;\n  padding: 20px;\n  color: black;\n`;\n\nexport const Title = styled.h1`\n  font-size: 1.5em;\n`;\nexport const Intro = styled.div`\n  font-family: 'Open Sans';\n  font-weight: 100;\n  font-style: italic;\n  font-size: 1.2rem;\n`;\n","// @flow\n\nimport * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { Layout, Header, Title, Intro } from './styled';\nimport * as appActions from 'app/redux/actions/app';\n\ntype Props = {\n  loadDummy: Function,\n};\n\nclass Route1 extends React.Component<Props> {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    this.props.loadDummy();\n  }\n\n  render = () => (\n    <Layout>\n      <Header>\n        <Title>Biometric Identification</Title>\n      </Header>\n      <Intro>\n        Featuring:\n        <ul>\n          <li>Passport and driver license</li>\n          <li>Face detection and track</li>\n          <li>Speech recognition</li>\n          <li>Overlay auto rotation</li>\n        </ul>\n      </Intro>\n    </Layout>\n  );\n}\n\nexport default connect(null, {\n  ...appActions,\n})(Route1);\n","import React from 'react';\n\nexport default function asyncComponent(getComponent) {\n  return class AsyncComponent extends React.Component {\n    static Component = null;\n    state = { Component: AsyncComponent.Component };\n\n    componentWillMount() {\n      if (!this.state.Component) {\n        getComponent().then(Component => {\n          AsyncComponent.Component = Component;\n          this.setState({ Component });\n        });\n      }\n    }\n\n    render() {\n      const { Component } = this.state;\n      if (Component) {\n        return <Component {...this.props} />;\n      }\n      return null;\n    }\n  };\n}\n","import asyncComponent from 'util/AsyncComponent';\n\nexport default [\n  {\n    exact: true,\n    path: '/',\n    component: asyncComponent(() => import('../Main').then(mdl => mdl.default)),\n  },\n  {\n    exact: false,\n    path: '/biometric-id',\n    component: asyncComponent(() =>\n      import('../BiometricID').then(mdl => mdl.default)\n    ),\n  },\n  {\n    exact: true,\n    path: '/sessions-review',\n    component: asyncComponent(() =>\n      import('../SessionsReview').then(mdl => mdl.default)\n    ),\n  },\n  {\n    exact: true,\n    path: '/settings',\n    component: asyncComponent(() =>\n      import('../Settings').then(mdl => mdl.default)\n    ),\n  },\n];\n","// @flow\n\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Router, Route, Switch } from 'react-router-dom';\nimport { history } from 'util/history';\n\nimport routes from './routes';\nimport * as appActions from 'app/redux/actions/app';\nimport { setApiErrorHandlerCbk } from 'util/api-interface';\n\n// Layout\nimport ScrollToTop from './ScrollToTop';\nimport Footer from './layout/Footer';\nimport Header from './layout/Header';\nimport MobilePanel from './layout/MobilePanel';\nimport { Wrapper, Container, PanelMask } from './styled';\n\nsetApiErrorHandlerCbk(msg => {\n  log(msg);\n});\n\ntype Props = {\n  mobilePanel: boolean,\n  mobilePanelSwitch: Function,\n};\n\nclass App extends React.Component<Props> {\n  static defaultProps = {\n    mobilePanel: false,\n  };\n  render() {\n    const { mobilePanel } = this.props;\n    return (\n      <Router history={history}>\n        <ScrollToTop>\n          <Wrapper>\n            <Header {...this.props} />\n            <Container>\n              <Switch>\n                {routes.map((route, idx) => <Route key={idx} {...route} />)}\n              </Switch>\n            </Container>\n            <Footer />\n          </Wrapper>\n          <MobilePanel {...this.props} />\n          <PanelMask active={mobilePanel} />\n        </ScrollToTop>\n      </Router>\n    );\n  }\n}\n\nconst mapStateToProps = ({\n  app: {\n    ui: { mobilePanel, activeURL },\n  },\n}) => ({\n  mobilePanel,\n  activeURL,\n});\n\nexport default connect(mapStateToProps, {\n  ...appActions,\n})(App);\n","import * as types from './constants';\n\n// Sessions Review ID REDUCER\nexport function sessions(state = {}, payload) {\n  const newState = { ...state };\n\n  switch (payload.type) {\n    case types.REQUEST_SESSIONS: {\n      newState.list = [...payload.json.sessions];\n      break;\n    }\n  }\n  return newState;\n}\n","import * as types from './constants';\n\n// BIOMETRIC ID REDUCER\nexport function biometricId(state = {}, payload) {\n  const newState = { ...state };\n\n  switch (payload.type) {\n    case types.FACE_DETECTION: {\n      newState.faceDetection.coordinates = [...payload.json];\n      break;\n    }\n\n    case types.INIT_BIOMETRIC_ID_SESSION: {\n      newState.sessionId = payload.id;\n      break;\n    }\n\n    case types.SAVE_VIDEO: {\n      // TODO: do something with the video Blob or Array of frames\n      // newState.sessionId = payload.id;\n      break;\n    }\n\n    case types.SWITCH_SETTING: {\n      newState.settings[payload.setting] = !state.settings[payload.setting];\n      break;\n    }\n\n    case types.SET_SETTING: {\n      newState.settings[payload.setting] = payload.value;\n      break;\n    }\n  }\n  return newState;\n}\n","// import { handle } from 'redux-pack';\n\nimport * as types from '../actions/action-types';\n\n// APP REDUCER\nexport function app(state = {}, payload) {\n  const newState = { ...state };\n\n  switch (payload.type) {\n    case types.MOBILE_PANEL_SWITCH: {\n      newState.ui.mobilePanel = !newState.ui.mobilePanel;\n      break;\n    }\n  }\n  return newState;\n}\n","import { combineReducers } from 'redux';\n\nimport { app } from './app';\nimport { biometricId } from 'app/BiometricID/reducers';\nimport { sessions } from 'app/SessionsReview/reducers';\n\nexport default combineReducers({\n  app,\n  biometricId,\n  sessions,\n});\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport reducer from './reducers';\n\nconst initialState = {\n  app: {\n    ui: {\n      mobilePanel: false,\n    },\n  },\n  biometricId: {\n    sessionId: '',\n    settings: {\n      autoStartOnDetection: false,\n      captureVideo: false,\n      speechRecognition: false,\n      useMediaRecorderApi: false,\n      faceAngleDetection: false,\n      faceDetection: false,\n      overlayAutoRotation: false,\n      framesPerSecond: '24',\n      recordingTime: '5',\n      imageType: 'jpeg',\n      idType: 'Passport',\n      resolution: '640x480',\n      videoQuality: '50',\n      videoCodec: 'h264',\n    },\n  },\n  sessions: { list: [] },\n};\nlet store;\n\nconst Store = {\n  configureStore: () => {\n    const middleware = applyMiddleware(thunk);\n    if (process.env.NODE_ENV === 'development') {\n      const composeEnhancers =\n        window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n      const enhancer = composeEnhancers(middleware);\n      store = createStore(reducer, initialState, enhancer);\n    } else {\n      store = createStore(reducer, initialState, middleware);\n    }\n    return store;\n  },\n  getState: function() {\n    return store.getState();\n  },\n  getInitialState: function() {\n    return initialState;\n  },\n  dispatch: function(action) {\n    store.dispatch(action);\n  },\n};\n\nexport { Store as default };\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport { setLog } from 'util/helpers';\nimport store from 'app/redux/create-store';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nsetLog();\nconst Store = store.configureStore();\n\nReactDOM.render(\n  <Provider store={Store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\nregisterServiceWorker();\n","'use strict';\n\nif (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behavior.\n  require('promise/lib/rejection-tracking').enable();\n  window.Promise = require('promise/lib/es6-extensions.js');\n}\n\n// fetch() polyfill for making API calls.\nrequire('whatwg-fetch');\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = require('object-assign');\n\n// In tests, polyfill requestAnimationFrame since jsdom doesn't provide it yet.\n// We don't polyfill it in the browser--this is user's responsibility.\nif (process.env.NODE_ENV === 'test') {\n  require('raf').polyfill(global);\n}\n"],"sourceRoot":""}